{
	"info": {
		"_postman_id": "34cce79e-ebed-4c2e-b6c0-60a7818bb925",
		"name": "Mtool_Sanity_Multi_Array",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
	},
	"item": [
		{
			"name": "login",
			"event": [
				{
					"listen": "test",
					"script": {
						"id": "35ebd196-f9d2-49a7-85df-5f1762394cc3",
						"exec": [
							"// save the response into a local variable so that we can access it later in the script\r",
							"let response = pm.response.json();\r",
							"\r",
							"// retrieve the token value from the response\r",
							"let token = response[\"token\"];\r",
							"\r",
							"// save the token value to variables so that it can used in subsequent APIs\r",
							"pm.variables.set('token', token);\r",
							"postman.setEnvironmentVariable(\"token\", token);\r",
							"//pm.environment.set('token', token);\r",
							"\r",
							"// console.log(token);\r",
							"\r",
							"pm.test(\"Logged in as admin...\", function () {\r",
							"    pm.response.to.have.status(200);\r",
							"});"
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "POST",
				"header": [],
				"body": {
					"mode": "raw",
					"raw": "{\"username\":\"admin\",\"password\":\"admin\"}",
					"options": {
						"raw": {
							"language": "json"
						}
					}
				},
				"url": {
					"raw": "http://{{host}}:{{port}}/api/v1.0/login/",
					"protocol": "http",
					"host": [
						"{{host}}"
					],
					"port": "{{port}}",
					"path": [
						"api",
						"v1.0",
						"login",
						""
					]
				},
				"description": "login to MTool"
			},
			"response": []
		},
		{
			"name": "Stop ibofos",
			"event": [
				{
					"listen": "test",
					"script": {
						"id": "fe4ef5f1-19de-4ae5-ba33-962032b6fa59",
						"exec": [
							"let res = pm.response.json();\r",
							"\r",
							"pm.test(\"DAgent reponse is... \" +  res[\"response\"], function () {\r",
							"    pm.response.to.have.status(200);\r",
							"});\r",
							"\r",
							"\r",
							"if (responseCode.code === 200 || responseCode.code === 500) {\r",
							"    console.log(\" in if \")\r",
							"    setTimeout(function () {\r",
							"        console.log(\" in timeout \")\r",
							"    }, 20000);\r",
							"}\r",
							""
						],
						"type": "text/javascript"
					}
				},
				{
					"listen": "prerequest",
					"script": {
						"id": "c7827964-1816-48e8-a20b-ef398cfac8b4",
						"exec": [
							""
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "GET",
				"header": [
					{
						"key": "x-access-token",
						"type": "text",
						"value": "{{token}}"
					}
				],
				"url": {
					"raw": "http://{{host}}:{{port}}/api/v1.0/stop_ibofos",
					"protocol": "http",
					"host": [
						"{{host}}"
					],
					"port": "{{port}}",
					"path": [
						"api",
						"v1.0",
						"stop_ibofos"
					]
				}
			},
			"response": []
		},
		{
			"name": "Start ibofos",
			"event": [
				{
					"listen": "test",
					"script": {
						"id": "93383aba-62c9-4758-be67-09704e022a2d",
						"exec": [
							"if (responseCode.code === 200 || responseCode.code === 500) {\r",
							"    setTimeout(function () {\r",
							"    }, 10000);\r",
							"}\r",
							"\r",
							"let jsonData = pm.response.json();\r",
							"\r",
							"pm.test(\"DAgent reponse is... \" + jsonData[\"response\"], function () {\r",
							"    pm.expect(pm.response.code).to.be.oneOf([200, 500]);\r",
							"\r",
							"});\r",
							"\r",
							""
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "GET",
				"header": [
					{
						"key": "x-access-token",
						"value": "{{token}}",
						"type": "text"
					}
				],
				"url": {
					"raw": "http://{{host}}:{{port}}/api/v1.0/start_ibofos",
					"protocol": "http",
					"host": [
						"{{host}}"
					],
					"port": "{{port}}",
					"path": [
						"api",
						"v1.0",
						"start_ibofos"
					]
				}
			},
			"response": []
		},
		{
			"name": "IsPOS-Running",
			"event": [
				{
					"listen": "test",
					"script": {
						"id": "b53f9b98-5bda-4a4e-8b63-c686cf3d4ee6",
						"exec": [
							"pm.test(\"POS is Running...\", function () {\r",
							"    pm.response.to.have.status(200);\r",
							"});\r",
							"\r",
							"\r",
							"var jsonData = pm.response.json();\r",
							"pm.test(\"Verify Json values\", function () {\r",
							"    try {\r",
							"       pm.expect(jsonData.RESULT.result.status.description).is.to.equal(\"Success\");\r",
							"    }\r",
							"    catch (err) {\r",
							"        pm.test(\"FAIL: \", () => { throw new Error(\"Could not start POS\") });\r",
							"    }\r",
							"});"
						],
						"type": "text/javascript"
					}
				},
				{
					"listen": "prerequest",
					"script": {
						"id": "15679fd9-2a64-49a3-be8a-eef0fdbbc130",
						"exec": [
							""
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "GET",
				"header": [
					{
						"key": "x-access-token",
						"type": "text",
						"value": "{{token}}"
					}
				],
				"url": {
					"raw": "http://{{host}}:{{port}}/api/v1.0/get_Is_Ibof_OS_Running/",
					"protocol": "http",
					"host": [
						"{{host}}"
					],
					"port": "{{port}}",
					"path": [
						"api",
						"v1.0",
						"get_Is_Ibof_OS_Running",
						""
					]
				}
			},
			"response": []
		},
		{
			"name": "Get devices",
			"event": [
				{
					"listen": "test",
					"script": {
						"id": "430bd34c-9b20-49df-b726-c7a7c3775c79",
						"exec": [
							"// save the response into a local variable so that we can access it later in the script\r",
							"let response = pm.response.json();\r",
							"\r",
							"console.log(response);\r",
							"let deviceCount = 0;\r",
							"/*\r",
							"try {\r",
							"    let devices = response.devices.map(d => d.name)\r",
							"    deviceCount = devices.length;\r",
							"    console.log(\"devices-> \", devices)\r",
							"    // save the token value to variables so that it can used in subsequent APIs\r",
							"    pm.variables.set('device', devices[0]);\r",
							"    console.log('device is....', devices[0]);\r",
							"    postman.setEnvironmentVariable(\"device\", devices[0]);\r",
							"}\r",
							"catch (err) {\r",
							"    console.log('err....', err);\r",
							"}\r",
							"pm.test(\"Get device info...\", function () {\r",
							"    pm.response.to.have.status(200);\r",
							"});\r",
							"\r",
							"if (deviceCount > 0) {\r",
							"    //Devices.. Create or use existing array\r",
							"    console.log(deviceCount, ' device found.... Creating array or using existing array now...');\r",
							"   // postman.setNextRequest(\"Delete Array\");\r",
							"    // postman.setNextRequest(\"Create Array\")\r",
							"\r",
							"} else {\r",
							"    //no devices.. logout \r",
							"    console.log('No Device found...... Exiting now...');\r",
							"    //postman.setNextRequest(\"logout\");\r",
							"}\r",
							"*/"
						],
						"type": "text/javascript"
					}
				},
				{
					"listen": "prerequest",
					"script": {
						"id": "61bb2ee7-40ad-4d3c-a977-75c9dd07c997",
						"exec": [
							"//setTimeout( function() {}, 2000)\r",
							"//pm.Wait(5000);\r",
							"\r",
							"let temp_token = 'eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJfaWQiOiJhZG1pbiIsImV4cCI6MTU5NzQwMDc3Mn0.u2dTsSz6OKOHQKLt2XjpRPFLRCJmzlC7dafmrq_VcWc'\r",
							""
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "GET",
				"header": [
					{
						"key": "x-access-token",
						"type": "text",
						"value": "{{token}}"
					}
				],
				"url": {
					"raw": "http://{{host}}:{{port}}/api/v1.0/get_devices/",
					"protocol": "http",
					"host": [
						"{{host}}"
					],
					"port": "{{port}}",
					"path": [
						"api",
						"v1.0",
						"get_devices",
						""
					]
				}
			},
			"response": []
		},
		{
			"name": "Delete 1st Array",
			"event": [
				{
					"listen": "test",
					"script": {
						"id": "a0e3b384-1260-49b3-b8ac-3a17d55104c6",
						"exec": [
							"pm.test(\"Response code \", function () {\r",
							"    pm.response.to.have.status(200);\r",
							"});\r",
							"\r",
							"var jsonData = pm.response.json();\r",
							"try {\r",
							"    response = jsonData.result.status.description\r",
							"}\r",
							"catch (err) {\r",
							"    try {\r",
							"        response = jsonData.result.description\r",
							"    }\r",
							"    catch (err) {\r",
							"        pm.test(\"FAIL: \", () => { throw new Error(\"Exception in parsing response\") });\r",
							"    }\r",
							"}\r",
							"\r",
							"\r",
							"\r",
							"if (responseCode.code === 200) {\r",
							"    // Delay for 12 Seconds (set in milliseconds)\r",
							"    setTimeout(function () {\r",
							"    }, 500);\r",
							"}"
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "POST",
				"header": [
					{
						"key": "x-access-token",
						"type": "text",
						"value": "{{token}}"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\"arrayname\":\"\"}",
					"options": {
						"raw": {
							"language": "json"
						}
					}
				},
				"url": {
					"raw": "http://{{host}}:{{port}}/api/v1.0/delete_array/{{arrayName1}}",
					"protocol": "http",
					"host": [
						"{{host}}"
					],
					"port": "{{port}}",
					"path": [
						"api",
						"v1.0",
						"delete_array",
						"{{arrayName1}}"
					]
				}
			},
			"response": []
		},
		{
			"name": "Delete 2nd Array",
			"event": [
				{
					"listen": "test",
					"script": {
						"id": "487fc905-8b02-4440-a62b-a5e2f14d0281",
						"exec": [
							"pm.test(\"Response code \", function () {\r",
							"    pm.response.to.have.status(200);\r",
							"});\r",
							"\r",
							"var jsonData = pm.response.json();\r",
							"try {\r",
							"    response = jsonData.result.status.description\r",
							"}\r",
							"catch (err) {\r",
							"    try {\r",
							"        response = jsonData.result.description\r",
							"    }\r",
							"    catch (err) {\r",
							"        pm.test(\"FAIL: \", () => { throw new Error(\"Exception in parsing response\") });\r",
							"    }\r",
							"}\r",
							"\r",
							"\r",
							"\r",
							"if (responseCode.code === 200) {\r",
							"    // Delay for 12 Seconds (set in milliseconds)\r",
							"    setTimeout(function () {\r",
							"    }, 500);\r",
							"}"
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "POST",
				"header": [
					{
						"key": "x-access-token",
						"type": "text",
						"value": "{{token}}"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\"arrayname\":\"\"}",
					"options": {
						"raw": {
							"language": "json"
						}
					}
				},
				"url": {
					"raw": "http://{{host}}:{{port}}/api/v1.0/delete_array/{{arrayName2}}",
					"protocol": "http",
					"host": [
						"{{host}}"
					],
					"port": "{{port}}",
					"path": [
						"api",
						"v1.0",
						"delete_array",
						"{{arrayName2}}"
					]
				}
			},
			"response": []
		},
		{
			"name": "Create 1st Array",
			"event": [
				{
					"listen": "test",
					"script": {
						"id": "d8b7a5c1-7bde-4288-b0ad-88a39a5f4ed0",
						"exec": [
							"//pm.test(\"Created an array...\", function () {\r",
							"//   pm.response.to.have.status(200);\r",
							"//});\r",
							"\r",
							"var jsonData = pm.response.json();\r",
							"console.log(jsonData.result.status.description);\r",
							"let status = \"Code: \" + jsonData.result.status.code + \" Level: \" + jsonData.result.status.level + \" Description: \" + jsonData.result.status.description;\r",
							"console.log(jsonData.result);\r",
							"//let description = jsonData.result.status;\r",
							"pm.test(\"DAgent response is... \" + status, function () {\r",
							"    pm.expect(jsonData.result.status.description).is.to.equal(\"Success\");\r",
							"});\r",
							"/*\r",
							"let statusDesc = jsonData.result.status.description;\r",
							"\r",
							"if (statusDesc.toLowerCase() == \"success\") {\r",
							"    setTimeout(function () {\r",
							"    }, 2000);\r",
							"\r",
							"    // Create Volume\r",
							"    postman.setNextRequest(\"Create Volume\")\r",
							"} else {\r",
							"\r",
							"    console.log('Array creating failed .... exiting..');\r",
							"\r",
							"    // try restarting POS\r",
							"    let restartCount = pm.environment.get(\"posRestartCount\");\r",
							"    if (restartCount <= 3) {\r",
							"        // increment restart count \r",
							"        pm.environment.set(\"posRestartCount\", (restartCount + 1));\r",
							"        // Try restart \r",
							"        postman.setNextRequest(\"Stop ibofos\");\r",
							"\r",
							"    } else {\r",
							"        // Fail and logout\r",
							"        postman.setNextRequest(\"logout\");\r",
							"    }\r",
							"\r",
							"\r",
							"}\r",
							"*/"
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "POST",
				"header": [
					{
						"key": "x-access-token",
						"type": "text",
						"value": "{{token}}"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\"size\":\"01600321314816160032131481616003213148161600321314816\",\"arrayname\":\"{{arrayName1}}\",\"raidtype\":\"raid5\",\"storageDisks\":[{\"deviceName\":\"{{storageDisk1}}\"},{\"deviceName\":\"{{storageDisk2}}\"},{\"deviceName\":\"{{storageDisk3}}\"}],\"spareDisks\":[{\"deviceName\":\"{{spareDisk1}}\"}],\"writeBufferDisk\":[],\"metaDisk\":\"{{WBPDisk1}}\"}",
					"options": {
						"raw": {
							"language": "json"
						}
					}
				},
				"url": {
					"raw": "http://{{host}}:{{port}}/api/v1.0/create_arrays/",
					"protocol": "http",
					"host": [
						"{{host}}"
					],
					"port": "{{port}}",
					"path": [
						"api",
						"v1.0",
						"create_arrays",
						""
					]
				}
			},
			"response": []
		},
		{
			"name": "Create 2nd Array",
			"event": [
				{
					"listen": "test",
					"script": {
						"id": "a01fb97f-3541-42b4-8f23-b4d2173ae992",
						"exec": [
							"//pm.test(\"Created an array...\", function () {\r",
							"//   pm.response.to.have.status(200);\r",
							"//});\r",
							"\r",
							"var jsonData = pm.response.json();\r",
							"console.log(jsonData.result.status.description);\r",
							"let status = \"Code: \" + jsonData.result.status.code + \" Level: \" + jsonData.result.status.level + \" Description: \" + jsonData.result.status.description;\r",
							"console.log(jsonData.result);\r",
							"//let description = jsonData.result.status;\r",
							"pm.test(\"DAgent response is... \" + status, function () {\r",
							"    pm.expect(jsonData.result.status.description).is.to.equal(\"Success\");\r",
							"});\r",
							"\r",
							"/*\r",
							"let statusDesc = jsonData.result.status.description;\r",
							"\r",
							"if (statusDesc.toLowerCase() == \"success\") {\r",
							"    setTimeout(function () {\r",
							"    }, 2000);\r",
							"\r",
							"    // Create Volume\r",
							"    postman.setNextRequest(\"Create Volume\")\r",
							"} else {\r",
							"\r",
							"    console.log('Array creating failed .... exiting..');\r",
							"\r",
							"    // try restarting POS\r",
							"    let restartCount = pm.environment.get(\"posRestartCount\");\r",
							"    if (restartCount <= 3) {\r",
							"        // increment restart count \r",
							"        pm.environment.set(\"posRestartCount\", (restartCount + 1));\r",
							"        // Try restart \r",
							"        postman.setNextRequest(\"Stop ibofos\");\r",
							"\r",
							"    } else {\r",
							"        // Fail and logout\r",
							"        postman.setNextRequest(\"logout\");\r",
							"    }\r",
							"}\r",
							"*/"
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "POST",
				"header": [
					{
						"key": "x-access-token",
						"type": "text",
						"value": "{{token}}"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\"size\":\"01600321314816160032131481616003213148161600321314816\",\"arrayname\":\"{{arrayName2}}\",\"raidtype\":\"raid5\",\"storageDisks\":[{\"deviceName\":\"{{storageDisk4}}\"},{\"deviceName\":\"{{storageDisk5}}\"},{\"deviceName\":\"{{storageDisk6}}\"}],\"spareDisks\":[{\"deviceName\":\"{{spareDisk2}}\"}],\"writeBufferDisk\":[],\"metaDisk\":\"{{WBPDisk2}}\"}",
					"options": {
						"raw": {
							"language": "json"
						}
					}
				},
				"url": {
					"raw": "http://{{host}}:{{port}}/api/v1.0/create_arrays/",
					"protocol": "http",
					"host": [
						"{{host}}"
					],
					"port": "{{port}}",
					"path": [
						"api",
						"v1.0",
						"create_arrays",
						""
					]
				}
			},
			"response": []
		},
		{
			"name": "unmount 1st array",
			"event": [
				{
					"listen": "test",
					"script": {
						"id": "230c8a9e-041b-46f3-98d6-e6815ce96739",
						"exec": [
							""
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "DELETE",
				"header": [
					{
						"key": "x-access-token",
						"type": "text",
						"value": "{{token}}"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\"array\": \"{{arrayName1}}\"}",
					"options": {
						"raw": {
							"language": "json"
						}
					}
				},
				"url": {
					"raw": "http://{{host}}:{{port}}/api/v1/array/mount",
					"protocol": "http",
					"host": [
						"{{host}}"
					],
					"port": "{{port}}",
					"path": [
						"api",
						"v1",
						"array",
						"mount"
					]
				}
			},
			"response": []
		},
		{
			"name": "unmount 2nd array",
			"event": [
				{
					"listen": "test",
					"script": {
						"id": "45f12b26-efcf-4284-9469-4ad4760bafc0",
						"exec": [
							""
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "DELETE",
				"header": [
					{
						"key": "x-access-token",
						"type": "text",
						"value": "{{token}}"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\"array\": \"{{arrayName2}}\"}",
					"options": {
						"raw": {
							"language": "json"
						}
					}
				},
				"url": {
					"raw": "http://{{host}}:{{port}}/api/v1/array/mount",
					"protocol": "http",
					"host": [
						"{{host}}"
					],
					"port": "{{port}}",
					"path": [
						"api",
						"v1",
						"array",
						"mount"
					]
				}
			},
			"response": []
		},
		{
			"name": "mount 1st array",
			"event": [
				{
					"listen": "test",
					"script": {
						"id": "495fb72e-593a-4017-9bde-e1d80401d1bb",
						"exec": [
							""
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "POST",
				"header": [
					{
						"key": "x-access-token",
						"type": "text",
						"value": "{{token}}"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\"array\": \"{{arrayName1}}\"}",
					"options": {
						"raw": {
							"language": "json"
						}
					}
				},
				"url": {
					"raw": "http://{{host}}:{{port}}/api/v1/array/mount",
					"protocol": "http",
					"host": [
						"{{host}}"
					],
					"port": "{{port}}",
					"path": [
						"api",
						"v1",
						"array",
						"mount"
					]
				}
			},
			"response": []
		},
		{
			"name": "mount 2nd array",
			"event": [
				{
					"listen": "test",
					"script": {
						"id": "5af0f5de-e0fc-44a3-b371-5caa6948349f",
						"exec": [
							""
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "POST",
				"header": [
					{
						"key": "x-access-token",
						"type": "text",
						"value": "{{token}}"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\"array\": \"{{arrayName2}}\"}",
					"options": {
						"raw": {
							"language": "json"
						}
					}
				},
				"url": {
					"raw": "http://{{host}}:{{port}}/api/v1/array/mount",
					"protocol": "http",
					"host": [
						"{{host}}"
					],
					"port": "{{port}}",
					"path": [
						"api",
						"v1",
						"array",
						"mount"
					]
				}
			},
			"response": []
		},
		{
			"name": "Get Arrays",
			"event": [
				{
					"listen": "test",
					"script": {
						"id": "044a6b61-2579-47e3-a4dd-d5dfd73dda76",
						"exec": [
							"\r",
							"pm.test(\"Array Info is retrieved...\", function () {\r",
							"    pm.response.to.have.status(200);\r",
							"});\r",
							"\r",
							"var jsonData = pm.response.json();\r",
							"\r",
							"\r",
							"if (jsonData.length == 0) {\r",
							"    console.log('Creating new array....');\r",
							"} else {\r",
							"    console.log('Array exists.... Creating volume.');\r",
							"}\r",
							""
						],
						"type": "text/javascript"
					}
				},
				{
					"listen": "prerequest",
					"script": {
						"id": "6c946145-75ea-4e66-816f-09a5e36e6293",
						"exec": [
							"let temp_token = 'eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJfaWQiOiJhZG1pbiIsImV4cCI6MTU5NzQwMDc3Mn0.u2dTsSz6OKOHQKLt2XjpRPFLRCJmzlC7dafmrq_VcWc'"
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "GET",
				"header": [
					{
						"key": "x-access-token",
						"type": "text",
						"value": "{{token}}"
					}
				],
				"url": {
					"raw": "http://{{host}}:{{port}}/api/v1/get_arrays/",
					"protocol": "http",
					"host": [
						"{{host}}"
					],
					"port": "{{port}}",
					"path": [
						"api",
						"v1",
						"get_arrays",
						""
					]
				}
			},
			"response": []
		},
		{
			"name": "remove spare disk in 1st array",
			"event": [
				{
					"listen": "test",
					"script": {
						"id": "4a3b2283-0fb1-4eae-b396-bbfff2d26dab",
						"exec": [
							"pm.test(\"Response code \", function () {\r",
							"    pm.response.to.have.status(200);\r",
							"});\r",
							"\r",
							"var jsonData = pm.response.json();\r",
							"try {\r",
							"    response = jsonData.result.status.description\r",
							"}\r",
							"catch (err) {\r",
							"    pm.test(\"FAIL: \", () => { throw new Error(\"Exception in parsing response\") });\r",
							"}\r",
							"\r",
							"pm.test(\"DAgent reponse is...\"+response, function () {\r",
							"       pm.expect(response).is.to.equal(\"Success\");\r",
							"    \r",
							"});"
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "POST",
				"header": [
					{
						"key": "x-access-token",
						"type": "text",
						"value": "{{token}}"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\"name\": \"{{spareDisk1}}\", \"array\": \"{{arrayName1}}\"}",
					"options": {
						"raw": {
							"language": "json"
						}
					}
				},
				"url": {
					"raw": "http://{{host}}:{{port}}/api/v1.0/remove_spare_device/",
					"protocol": "http",
					"host": [
						"{{host}}"
					],
					"port": "{{port}}",
					"path": [
						"api",
						"v1.0",
						"remove_spare_device",
						""
					]
				}
			},
			"response": []
		},
		{
			"name": "remove spare disk in 2nd array",
			"event": [
				{
					"listen": "test",
					"script": {
						"id": "57538934-f00e-4b9e-8b28-7ecc416dee7a",
						"exec": [
							"pm.test(\"Response code \", function () {\r",
							"    pm.response.to.have.status(200);\r",
							"});\r",
							"\r",
							"var jsonData = pm.response.json();\r",
							"try {\r",
							"    response = jsonData.result.status.description\r",
							"}\r",
							"catch (err) {\r",
							"    pm.test(\"FAIL: \", () => { throw new Error(\"Exception in parsing response\") });\r",
							"}\r",
							"\r",
							"pm.test(\"DAgent reponse is...\"+response, function () {\r",
							"       pm.expect(response).is.to.equal(\"Success\");\r",
							"    \r",
							"});"
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "POST",
				"header": [
					{
						"key": "x-access-token",
						"type": "text",
						"value": "{{token}}"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\"name\": \"{{spareDisk2}}\", \"array\": \"{{arrayName2}}\"}",
					"options": {
						"raw": {
							"language": "json"
						}
					}
				},
				"url": {
					"raw": "http://{{host}}:{{port}}/api/v1.0/remove_spare_device/",
					"protocol": "http",
					"host": [
						"{{host}}"
					],
					"port": "{{port}}",
					"path": [
						"api",
						"v1.0",
						"remove_spare_device",
						""
					]
				}
			},
			"response": []
		},
		{
			"name": "add spare disk in 1st array",
			"event": [
				{
					"listen": "test",
					"script": {
						"id": "d6520505-365a-4ffe-b50d-1fa2512d98ae",
						"exec": [
							"pm.test(\"Response code \", function () {\r",
							"    pm.response.to.have.status(200);\r",
							"});\r",
							"\r",
							"var jsonData = pm.response.json();\r",
							"try {\r",
							"    response = jsonData.result.status.description\r",
							"}\r",
							"catch (err) {\r",
							"    pm.test(\"FAIL: \", () => { throw new Error(\"Exception in parsing response\") });\r",
							"}\r",
							"\r",
							"pm.test(\"DAgent reponse is...\"+response, function () {\r",
							"       pm.expect(response).is.to.equal(\"Success\");\r",
							"    \r",
							"});"
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "POST",
				"header": [
					{
						"key": "x-access-token",
						"type": "text",
						"value": "{{token}}"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\"name\": \"{{spareDisk1}}\", \"array\": \"{{arrayName1}}\"}",
					"options": {
						"raw": {
							"language": "json"
						}
					}
				},
				"url": {
					"raw": "http://{{host}}:{{port}}/api/v1.0/add_spare_device/",
					"protocol": "http",
					"host": [
						"{{host}}"
					],
					"port": "{{port}}",
					"path": [
						"api",
						"v1.0",
						"add_spare_device",
						""
					]
				}
			},
			"response": []
		},
		{
			"name": "add spare disk in 2nd array",
			"event": [
				{
					"listen": "test",
					"script": {
						"id": "1d25d3f0-e86c-4c4e-85e0-b7797ba13ba1",
						"exec": [
							"pm.test(\"Response code \", function () {\r",
							"    pm.response.to.have.status(200);\r",
							"});\r",
							"\r",
							"var jsonData = pm.response.json();\r",
							"try {\r",
							"    response = jsonData.result.status.description\r",
							"}\r",
							"catch (err) {\r",
							"    pm.test(\"FAIL: \", () => { throw new Error(\"Exception in parsing response\") });\r",
							"}\r",
							"\r",
							"pm.test(\"DAgent reponse is...\"+response, function () {\r",
							"       pm.expect(response).is.to.equal(\"Success\");\r",
							"    \r",
							"});"
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "POST",
				"header": [
					{
						"key": "x-access-token",
						"type": "text",
						"value": "{{token}}"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\"name\": \"{{spareDisk2}}\", \"array\": \"{{arrayName2}}\"}",
					"options": {
						"raw": {
							"language": "json"
						}
					}
				},
				"url": {
					"raw": "http://{{host}}:{{port}}/api/v1.0/add_spare_device/",
					"protocol": "http",
					"host": [
						"{{host}}"
					],
					"port": "{{port}}",
					"path": [
						"api",
						"v1.0",
						"add_spare_device",
						""
					]
				}
			},
			"response": []
		},
		{
			"name": "Create 3 Volume in 1st array",
			"event": [
				{
					"listen": "test",
					"script": {
						"id": "35df6572-a783-4482-956c-b50b68a67b33",
						"exec": [
							"pm.test(\"Volume created...\", function () {\r",
							"    pm.response.to.have.status(200);\r",
							"});\r",
							"setTimeout(function () {\r",
							"        console.log(\" in timeout \")\r",
							"    }, 5000);"
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "POST",
				"header": [
					{
						"key": "x-access-token",
						"type": "text",
						"value": "{{token}}"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\"name\":\"{{volNameArr1}}\",\"size\":\"20\",\"description\":\"\",\"unit\":\"GB\",\"arrayname\":\"{{arrayName1}}\",\"maxbw\":0,\"maxiops\":0,\"count\":\"3\",\"suffix\":0,\"stop_on_error\":false,\"mount_vol\":true,\"array\":\"{{arrayName1}}\",\"max_available_size\": \"{{globals.totalsize}}\"}",
					"options": {
						"raw": {
							"language": "json"
						}
					}
				},
				"url": {
					"raw": "http://{{host}}:{{port}}/api/v1.0/save-volume/",
					"protocol": "http",
					"host": [
						"{{host}}"
					],
					"port": "{{port}}",
					"path": [
						"api",
						"v1.0",
						"save-volume",
						""
					]
				}
			},
			"response": []
		},
		{
			"name": "Create single Volume in 1st array",
			"event": [
				{
					"listen": "test",
					"script": {
						"id": "741aa8fa-6aa0-42cb-a06a-7c1db2dd6f06",
						"exec": [
							"pm.test(\"Volume created...\", function () {\r",
							"    pm.response.to.have.status(200);\r",
							"});\r",
							""
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "POST",
				"header": [
					{
						"key": "x-access-token",
						"type": "text",
						"value": "{{token}}"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\"name\":\"{{volNameArr1_1}}\",\"size\":\"20\",\"description\":\"\",\"unit\":\"GB\",\"arrayname\":\"{{arrayName1}}\",\"maxbw\":0,\"maxiops\":0,\"count\":\"1\",\"suffix\":0,\"stop_on_error\":false,\"mount_vol\":true,\"array\":\"{{arrayName1}}\",\"max_available_size\": \"{{globals.totalsize}}\"}",
					"options": {
						"raw": {
							"language": "json"
						}
					}
				},
				"url": {
					"raw": "http://{{host}}:{{port}}/api/v1.0/save-volume/",
					"protocol": "http",
					"host": [
						"{{host}}"
					],
					"port": "{{port}}",
					"path": [
						"api",
						"v1.0",
						"save-volume",
						""
					]
				}
			},
			"response": []
		},
		{
			"name": "Get Volumes of 1st array",
			"event": [
				{
					"listen": "test",
					"script": {
						"id": "bdb872d5-1e76-4f77-8185-c7d0ec279535",
						"exec": [
							"pm.test(\"Get Volume data is successful...\", function () {\r",
							"    pm.response.to.have.status(200);\r",
							"});\r",
							"\r",
							"\r",
							"pm.test(\"Verify volume count\", function () {\r",
							"    // console.log(\"len \",volArr.length)\r",
							"\r",
							"    var jsonData = pm.response.json();\r",
							"\r",
							"    var count = jsonData.length;\r",
							"    console.log(\"count \", count)\r",
							"\r",
							"    pm.expect(count).to.be.above(0);\r",
							"\r",
							"});\r",
							"\r",
							""
						],
						"type": "text/javascript"
					}
				},
				{
					"listen": "prerequest",
					"script": {
						"id": "b6f66575-0a92-47e0-b9c7-080845115ad0",
						"exec": [
							""
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "GET",
				"header": [
					{
						"key": "x-access-token",
						"type": "text",
						"value": "{{token}}"
					}
				],
				"url": {
					"raw": "http://{{host}}:{{port}}/api/v1/{{arrayName1}}/get_volumes/",
					"protocol": "http",
					"host": [
						"{{host}}"
					],
					"port": "{{port}}",
					"path": [
						"api",
						"v1",
						"{{arrayName1}}",
						"get_volumes",
						""
					]
				}
			},
			"response": []
		},
		{
			"name": "cpu_graph",
			"event": [
				{
					"listen": "test",
					"script": {
						"id": "91f768b5-de4b-40d1-ae16-87d58d5d4c32",
						"exec": [
							"pm.test(\"Data received \", function () {\r",
							"    pm.response.to.have.status(200);\r",
							"});\r",
							""
						],
						"type": "text/javascript"
					}
				},
				{
					"listen": "prerequest",
					"script": {
						"id": "e19a653e-9112-40aa-b7bb-68e394fef75f",
						"exec": [
							""
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "GET",
				"header": [
					{
						"key": "x-access-token",
						"value": "{{token}}",
						"type": "text"
					}
				],
				"url": {
					"raw": "http://{{host}}:{{port}}/api/v1.0/usage_user/1m",
					"protocol": "http",
					"host": [
						"{{host}}"
					],
					"port": "{{port}}",
					"path": [
						"api",
						"v1.0",
						"usage_user",
						"1m"
					]
				}
			},
			"response": []
		},
		{
			"name": "array_bw_read",
			"event": [
				{
					"listen": "test",
					"script": {
						"id": "1db1d61b-42f9-4073-9f32-c4a62df565fc",
						"exec": [
							"pm.test(\"Data received\", function () {\r",
							"    pm.response.to.have.status(200);\r",
							"});\r",
							"\r",
							"/*\r",
							"var jsonData = pm.response.json();\r",
							"data = jsonData.res\r",
							"bw_sum = 0\r",
							"for (i = 0; i < data.length; i++) {\r",
							"    bw_sum = bw_sum + data[i].bw\r",
							"}\r",
							"console.log(\"bw_sum  \", bw_sum)\r",
							"pm.test(\"Verify Json values\", function () {\r",
							"    pm.expect(bw_sum).to.be.above(0);\r",
							"});\r",
							"\r",
							"Fio will not be running in CI/CD setup\r",
							"\r",
							"*/"
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "GET",
				"header": [
					{
						"key": "x-access-token",
						"value": "{{token}}",
						"type": "text"
					}
				],
				"url": {
					"raw": "http://{{host}}:{{port}}/api/v1/readbw/arrays?arrayids=0&time=5m",
					"protocol": "http",
					"host": [
						"{{host}}"
					],
					"port": "{{port}}",
					"path": [
						"api",
						"v1",
						"readbw",
						"arrays"
					],
					"query": [
						{
							"key": "arrayids",
							"value": "0"
						},
						{
							"key": "time",
							"value": "5m"
						}
					]
				}
			},
			"response": []
		},
		{
			"name": "Add Custom Admin User",
			"event": [
				{
					"listen": "test",
					"script": {
						"id": "7c7605b7-97d5-44eb-b2a8-efcd3ee91ef2",
						"exec": [
							"\r",
							"// reset \r",
							"pm.variables.set('token', '');\r",
							"\r",
							"if (responseCode.code === 200 || responseCode.code === 400) {\r",
							"    // Delay for 15 Seconds (set in milliseconds)\r",
							"    setTimeout(function () {\r",
							"    }, 15000);\r",
							"}"
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "POST",
				"header": [
					{
						"key": "x-access-token",
						"type": "text",
						"value": "{{token}}"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\"username\":\"pkadmin\",\"password\":\"pkadmin\",\"confirmpassword\":\"pkadmin\",\"user_role\":\"Admin\",\"mobilenumber\":\"+82 123 1231 234\",\"emailid\":\"pk@pk.com\",\"phone_number\":\"+82\",\"error\":\"\"}",
					"options": {
						"raw": {
							"language": "json"
						}
					}
				},
				"url": {
					"raw": "http://{{host}}:{{port}}/api/v1.0/add_new_user/",
					"protocol": "http",
					"host": [
						"{{host}}"
					],
					"port": "{{port}}",
					"path": [
						"api",
						"v1.0",
						"add_new_user",
						""
					]
				}
			},
			"response": []
		},
		{
			"name": "Login as Custom Admin user",
			"event": [
				{
					"listen": "test",
					"script": {
						"id": "1dad4bea-86e6-45be-bfb8-9cab283386fd",
						"exec": [
							"// save the response into a local variable so that we can access it later in the script\r",
							"let response = pm.response.json();\r",
							"\r",
							"// retrieve the token value from the response\r",
							"let token =  response[\"token\"];\r",
							"\r",
							"// reset \r",
							"pm.variables.set('token', '');\r",
							"\r",
							"// save the token value to variables so that it can used in subsequent APIs\r",
							"pm.variables.set('token', token);\r",
							"//pm.environment.set('token', token);\r",
							"\r",
							"// console.log(token);\r",
							"\r",
							"pm.test(\"PKAdmin logged in as admin...\", function () {\r",
							"    pm.response.to.have.status(200);\r",
							"});"
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "POST",
				"header": [],
				"body": {
					"mode": "raw",
					"raw": "{\"username\":\"pkadmin\",\"password\":\"pkadmin\"}",
					"options": {
						"raw": {
							"language": "json"
						}
					}
				},
				"url": {
					"raw": "http://{{host}}:{{port}}/api/v1.0/login/",
					"protocol": "http",
					"host": [
						"{{host}}"
					],
					"port": "{{port}}",
					"path": [
						"api",
						"v1.0",
						"login",
						""
					]
				}
			},
			"response": []
		},
		{
			"name": "Array Based Perf",
			"event": [
				{
					"listen": "test",
					"script": {
						"id": "d8510ac2-259f-4876-943a-30650ccfcc01",
						"exec": [
							"pm.test(\"Array Based Perf...\", function () {\r",
							"    pm.response.to.have.status(200);\r",
							"});\r",
							""
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "GET",
				"header": [
					{
						"key": "x-access-token",
						"type": "text",
						"value": "{{token}}"
					}
				],
				"url": {
					"raw": "http://{{host}}:{{port}}/api/v1/latency/arrays?arrayids=0&time=5m",
					"protocol": "http",
					"host": [
						"{{host}}"
					],
					"port": "{{port}}",
					"path": [
						"api",
						"v1",
						"latency",
						"arrays"
					],
					"query": [
						{
							"key": "arrayids",
							"value": "0"
						},
						{
							"key": "time",
							"value": "5m"
						}
					]
				}
			},
			"response": []
		},
		{
			"name": "Get Smart Info",
			"event": [
				{
					"listen": "test",
					"script": {
						"id": "d0b29a68-16f3-473b-aa24-c383ea8a1e6e",
						"exec": [
							"pm.test(\"Response code \", function () {\r",
							"    pm.response.to.have.status(200);\r",
							"});\r",
							"\r",
							"var jsonData = pm.response.json();\r",
							"try {\r",
							"    response = jsonData.result.status.description\r",
							"}\r",
							"catch (err) {\r",
							"    pm.test(\"FAIL: \", () => { throw new Error(\"Exception in parsing response\") });\r",
							"}\r",
							"\r",
							"pm.test(\"DAgent reponse is...\"+response, function () {\r",
							"       pm.expect(response).is.to.equal(\"Success\");\r",
							"    \r",
							"});"
						],
						"type": "text/javascript"
					}
				},
				{
					"listen": "prerequest",
					"script": {
						"id": "24c2b14e-9e17-4578-aaa3-e4ad2bb19aba",
						"exec": [
							""
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "GET",
				"header": [
					{
						"key": "x-access-token",
						"type": "text",
						"value": "{{token}}"
					}
				],
				"url": {
					"raw": "http://{{host}}:{{port}}/api/v1.0/device/smart/{{storageDisk1}}",
					"protocol": "http",
					"host": [
						"{{host}}"
					],
					"port": "{{port}}",
					"path": [
						"api",
						"v1.0",
						"device",
						"smart",
						"{{storageDisk1}}"
					]
				}
			},
			"response": []
		},
		{
			"name": "Create 3 Volume in 2nd array",
			"event": [
				{
					"listen": "test",
					"script": {
						"id": "231479ec-a2d6-48a7-aac5-255495892fc0",
						"exec": [
							"pm.test(\"Volume created...\", function () {\r",
							"    pm.response.to.have.status(200);\r",
							"});\r",
							"setTimeout(function () {\r",
							"        console.log(\" in timeout \")\r",
							"    }, 5000);\r",
							""
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "POST",
				"header": [
					{
						"key": "x-access-token",
						"type": "text",
						"value": "{{token}}"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\"name\":\"{{volNameArr2}}\",\"size\":\"20\",\"description\":\"\",\"unit\":\"GB\",\"arrayname\":\"{{arrayName2}}\",\"maxbw\":0,\"maxiops\":0,\"count\":\"3\",\"suffix\":0,\"stop_on_error\":false,\"mount_vol\":true,\"array\":\"{{arrayName2}}\",\"max_available_size\": \"{{globals.totalsize}}\"}",
					"options": {
						"raw": {
							"language": "json"
						}
					}
				},
				"url": {
					"raw": "http://{{host}}:{{port}}/api/v1.0/save-volume/",
					"protocol": "http",
					"host": [
						"{{host}}"
					],
					"port": "{{port}}",
					"path": [
						"api",
						"v1.0",
						"save-volume",
						""
					]
				}
			},
			"response": []
		},
		{
			"name": "Create single Volume in 2nd array",
			"event": [
				{
					"listen": "test",
					"script": {
						"id": "7efc02ae-cd52-4c03-af2c-a515abe5488c",
						"exec": [
							"pm.test(\"Volume created...\", function () {\r",
							"    pm.response.to.have.status(200);\r",
							"});\r",
							""
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "POST",
				"header": [
					{
						"key": "x-access-token",
						"type": "text",
						"value": "{{token}}"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\"name\":\"{{volNameArr2_1}}\",\"size\":\"20\",\"description\":\"\",\"unit\":\"GB\",\"arrayname\":\"{{arrayName2}}\",\"maxbw\":0,\"maxiops\":0,\"count\":\"1\",\"suffix\":0,\"stop_on_error\":false,\"mount_vol\":true,\"array\":\"{{arrayName2}}\",\"max_available_size\": \"{{globals.totalsize}}\"}",
					"options": {
						"raw": {
							"language": "json"
						}
					}
				},
				"url": {
					"raw": "http://{{host}}:{{port}}/api/v1.0/save-volume/",
					"protocol": "http",
					"host": [
						"{{host}}"
					],
					"port": "{{port}}",
					"path": [
						"api",
						"v1.0",
						"save-volume",
						""
					]
				}
			},
			"response": []
		},
		{
			"name": "Get Volumes of 2nd array",
			"event": [
				{
					"listen": "test",
					"script": {
						"id": "fca51667-cfa0-4514-8288-4dd9320c8437",
						"exec": [
							"pm.test(\"Get Volume data is successful...\", function () {\r",
							"    pm.response.to.have.status(200);\r",
							"});\r",
							"\r",
							"\r",
							"pm.test(\"Verify volume count\", function () {\r",
							"    // console.log(\"len \",volArr.length)\r",
							"\r",
							"    var jsonData = pm.response.json();\r",
							"\r",
							"    var count = jsonData.length;\r",
							"    console.log(\"count \", count)\r",
							"\r",
							"    pm.expect(count).to.be.above(0);\r",
							"\r",
							"});\r",
							"\r",
							""
						],
						"type": "text/javascript"
					}
				},
				{
					"listen": "prerequest",
					"script": {
						"id": "6001c63e-e706-455d-9051-808467f27ccd",
						"exec": [
							""
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "GET",
				"header": [
					{
						"key": "x-access-token",
						"type": "text",
						"value": "{{token}}"
					}
				],
				"url": {
					"raw": "http://{{host}}:{{port}}/api/v1/{{arrayName2}}/get_volumes/",
					"protocol": "http",
					"host": [
						"{{host}}"
					],
					"port": "{{port}}",
					"path": [
						"api",
						"v1",
						"{{arrayName2}}",
						"get_volumes",
						""
					]
				}
			},
			"response": []
		},
		{
			"name": "Update vol_arr1_0 in 1st array",
			"event": [
				{
					"listen": "test",
					"script": {
						"id": "f103dee5-ff51-4ec7-8188-51c82dded17d",
						"exec": [
							"pm.test(\"Response code \", function () {\r",
							"    pm.response.to.have.status(200);\r",
							"});\r",
							"\r",
							"var jsonData = pm.response.json();\r",
							"try {\r",
							"    response = jsonData.result.status.description\r",
							"}\r",
							"catch (err) {\r",
							"    pm.test(\"FAIL: \", () => { throw new Error(\"Exception in parsing response\") });\r",
							"}\r",
							"\r",
							"pm.test(\"DAgent reponse is...\" + response, function () {\r",
							"    pm.expect(response).is.to.equal(\"Success\");\r",
							"\r",
							"});"
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "PUT",
				"header": [
					{
						"key": "x-access-token",
						"type": "text",
						"value": "{{token}}"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\"maxiops\":10,\"maxbw\":20,\"name\":\"{{volNameArr1}}0\",\"array\":\"{{arrayName1}}\"}",
					"options": {
						"raw": {
							"language": "json"
						}
					}
				},
				"url": {
					"raw": "http://{{host}}:{{port}}/api/v1.0/update-volume/",
					"protocol": "http",
					"host": [
						"{{host}}"
					],
					"port": "{{port}}",
					"path": [
						"api",
						"v1.0",
						"update-volume",
						""
					]
				}
			},
			"response": []
		},
		{
			"name": "Update vol_arr2_0in 2nd  array",
			"event": [
				{
					"listen": "test",
					"script": {
						"id": "ed63008e-8783-4c7f-9d7e-92ee7946942a",
						"exec": [
							"pm.test(\"Response code \", function () {\r",
							"    pm.response.to.have.status(200);\r",
							"});\r",
							"\r",
							"var jsonData = pm.response.json();\r",
							"try {\r",
							"    response = jsonData.result.status.description\r",
							"}\r",
							"catch (err) {\r",
							"    pm.test(\"FAIL: \", () => { throw new Error(\"Exception in parsing response\") });\r",
							"}\r",
							"\r",
							"pm.test(\"DAgent reponse is...\" + response, function () {\r",
							"    pm.expect(response).is.to.equal(\"Success\");\r",
							"\r",
							"});"
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "PUT",
				"header": [
					{
						"key": "x-access-token",
						"type": "text",
						"value": "{{token}}"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\"maxiops\":10,\"maxbw\":20,\"name\":\"{{volNameArr2}}0\",\"array\":\"{{arrayName2}}\"}",
					"options": {
						"raw": {
							"language": "json"
						}
					}
				},
				"url": {
					"raw": "http://{{host}}:{{port}}/api/v1.0/update-volume/",
					"protocol": "http",
					"host": [
						"{{host}}"
					],
					"port": "{{port}}",
					"path": [
						"api",
						"v1.0",
						"update-volume",
						""
					]
				}
			},
			"response": []
		},
		{
			"name": "rename vol_arr1_0 in 1st array",
			"event": [
				{
					"listen": "test",
					"script": {
						"id": "890ccf60-e846-4af5-a9a2-24e39b080d87",
						"exec": [
							"pm.test(\"Response code \", function () {\r",
							"    pm.response.to.have.status(200);\r",
							"});\r",
							"\r",
							"var jsonData = pm.response.json();\r",
							"try {\r",
							"    response = jsonData.result.status.description\r",
							"}\r",
							"catch (err) {\r",
							"    pm.test(\"FAIL: \", () => { throw new Error(\"Exception in parsing response\") });\r",
							"}\r",
							"\r",
							"pm.test(\"DAgent reponse is...\"+response, function () {\r",
							"       pm.expect(response).is.to.equal(\"Success\");\r",
							"    \r",
							"});"
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "PATCH",
				"header": [
					{
						"key": "x-access-token",
						"type": "text",
						"value": "{{token}}"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\"param\": {\"name\": \"{{volNameArr1}}0\", \"newname\": \"{{volNameArr1}}0_renamed\", \"array\": \"{{arrayName1}}\"}}",
					"options": {
						"raw": {
							"language": "json"
						}
					}
				},
				"url": {
					"raw": "http://{{host}}:{{port}}/api/v1.0/volumes/{{volNameArr1}}0",
					"protocol": "http",
					"host": [
						"{{host}}"
					],
					"port": "{{port}}",
					"path": [
						"api",
						"v1.0",
						"volumes",
						"{{volNameArr1}}0"
					]
				}
			},
			"response": []
		},
		{
			"name": "rename vol_arr2_0 in 2nd array",
			"event": [
				{
					"listen": "test",
					"script": {
						"id": "671c4f9e-a3e2-4509-ad82-5dc7c764b55e",
						"exec": [
							"pm.test(\"Response code \", function () {\r",
							"    pm.response.to.have.status(200);\r",
							"});\r",
							"\r",
							"var jsonData = pm.response.json();\r",
							"try {\r",
							"    response = jsonData.result.status.description\r",
							"}\r",
							"catch (err) {\r",
							"    pm.test(\"FAIL: \", () => { throw new Error(\"Exception in parsing response\") });\r",
							"}\r",
							"\r",
							"pm.test(\"DAgent reponse is...\"+response, function () {\r",
							"       pm.expect(response).is.to.equal(\"Success\");\r",
							"    \r",
							"});"
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "PATCH",
				"header": [
					{
						"key": "x-access-token",
						"type": "text",
						"value": "{{token}}"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\"param\": {\"name\": \"{{volNameArr2}}0\", \"newname\": \"{{volNameArr2}}0_renamed\", \"array\": \"{{arrayName2}}\"}}",
					"options": {
						"raw": {
							"language": "json"
						}
					}
				},
				"url": {
					"raw": "http://{{host}}:{{port}}/api/v1.0/volumes/{{volNameArr2}}0",
					"protocol": "http",
					"host": [
						"{{host}}"
					],
					"port": "{{port}}",
					"path": [
						"api",
						"v1.0",
						"volumes",
						"{{volNameArr2}}0"
					]
				}
			},
			"response": []
		},
		{
			"name": "rename vol_arr1_0 Back in 1st array",
			"event": [
				{
					"listen": "test",
					"script": {
						"id": "68429141-d1b3-426d-a06b-1be2047e1e1a",
						"exec": [
							"pm.test(\"Response code \", function () {\r",
							"    pm.response.to.have.status(200);\r",
							"});\r",
							"\r",
							"var jsonData = pm.response.json();\r",
							"try {\r",
							"    response = jsonData.result.status.description\r",
							"}\r",
							"catch (err) {\r",
							"    pm.test(\"FAIL: \", () => { throw new Error(\"Exception in parsing response\") });\r",
							"}\r",
							"\r",
							"pm.test(\"DAgent reponse is...\"+response, function () {\r",
							"       pm.expect(response).is.to.equal(\"Success\");\r",
							"    \r",
							"});"
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "PATCH",
				"header": [
					{
						"key": "x-access-token",
						"type": "text",
						"value": "{{token}}"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\"param\": {\"name\": \"{{volNameArr1}}0_renamed\", \"newname\": \"{{volNameArr1}}0\", \"array\": \"{{arrayName1}}\"}}",
					"options": {
						"raw": {
							"language": "json"
						}
					}
				},
				"url": {
					"raw": "http://{{host}}:{{port}}/api/v1.0/volumes/{{volNameArr1}}0_renamed",
					"protocol": "http",
					"host": [
						"{{host}}"
					],
					"port": "{{port}}",
					"path": [
						"api",
						"v1.0",
						"volumes",
						"{{volNameArr1}}0_renamed"
					]
				}
			},
			"response": []
		},
		{
			"name": "rename vol_arr2_0 Back in 2nd array",
			"event": [
				{
					"listen": "test",
					"script": {
						"id": "804e6985-7c2a-471c-bb8b-2ea0fa9d6682",
						"exec": [
							"pm.test(\"Response code \", function () {\r",
							"    pm.response.to.have.status(200);\r",
							"});\r",
							"\r",
							"var jsonData = pm.response.json();\r",
							"try {\r",
							"    response = jsonData.result.status.description\r",
							"}\r",
							"catch (err) {\r",
							"    pm.test(\"FAIL: \", () => { throw new Error(\"Exception in parsing response\") });\r",
							"}\r",
							"\r",
							"pm.test(\"DAgent reponse is...\"+response, function () {\r",
							"       pm.expect(response).is.to.equal(\"Success\");\r",
							"    \r",
							"});"
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "PATCH",
				"header": [
					{
						"key": "x-access-token",
						"type": "text",
						"value": "{{token}}"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\"param\": {\"name\": \"{{volNameArr2}}0_renamed\", \"newname\": \"{{volNameArr2}}0\", \"array\": \"{{arrayName2}}\"}}",
					"options": {
						"raw": {
							"language": "json"
						}
					}
				},
				"url": {
					"raw": "http://{{host}}:{{port}}/api/v1.0/volumes/{{volNameArr2}}0_renamed",
					"protocol": "http",
					"host": [
						"{{host}}"
					],
					"port": "{{port}}",
					"path": [
						"api",
						"v1.0",
						"volumes",
						"{{volNameArr2}}0_renamed"
					]
				}
			},
			"response": []
		},
		{
			"name": "unmount vol_arr1_0 in 1st array",
			"event": [
				{
					"listen": "test",
					"script": {
						"id": "de3ea2c8-c2a0-49bd-b75e-80018f7f13b1",
						"exec": [
							"\r",
							"\r",
							"pm.test(\"Volume updated...\", function () {\r",
							"    pm.response.to.have.status(200);\r",
							"});\r",
							"\r",
							"var jsonData = pm.response.json(); \r",
							"console.log(jsonData.result.status.description)\r",
							"pm.test(\"Verify Json values\", function () { \r",
							"    pm.expect(jsonData.result.status.description).is.to.equal(\"Success\"); \r",
							"});"
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "DELETE",
				"header": [
					{
						"key": "x-access-token",
						"type": "text",
						"value": "{{token}}"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\"name\": \"{{volNameArr1}}0\", \"array\": \"{{arrayName1}}\"}\r\n",
					"options": {
						"raw": {
							"language": "json"
						}
					}
				},
				"url": {
					"raw": "http://{{host}}:{{port}}/api/v1.0/volume/mount",
					"protocol": "http",
					"host": [
						"{{host}}"
					],
					"port": "{{port}}",
					"path": [
						"api",
						"v1.0",
						"volume",
						"mount"
					]
				}
			},
			"response": []
		},
		{
			"name": "unmount vol_arr2_0 in 2nd array",
			"event": [
				{
					"listen": "test",
					"script": {
						"id": "0563ed38-962c-4de0-96a7-1c80ff4f3a1d",
						"exec": [
							"\r",
							"\r",
							"pm.test(\"Volume updated...\", function () {\r",
							"    pm.response.to.have.status(200);\r",
							"});\r",
							"\r",
							"var jsonData = pm.response.json(); \r",
							"console.log(jsonData.result.status.description)\r",
							"pm.test(\"Verify Json values\", function () { \r",
							"    pm.expect(jsonData.result.status.description).is.to.equal(\"Success\"); \r",
							"});"
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "DELETE",
				"header": [
					{
						"key": "x-access-token",
						"type": "text",
						"value": "{{token}}"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\"name\": \"{{volNameArr2}}0\", \"array\": \"{{arrayName2}}\"}\r\n",
					"options": {
						"raw": {
							"language": "json"
						}
					}
				},
				"url": {
					"raw": "http://{{host}}:{{port}}/api/v1.0/volume/mount",
					"protocol": "http",
					"host": [
						"{{host}}"
					],
					"port": "{{port}}",
					"path": [
						"api",
						"v1.0",
						"volume",
						"mount"
					]
				}
			},
			"response": []
		},
		{
			"name": "mount vol_arr1_0 in 1st array",
			"event": [
				{
					"listen": "test",
					"script": {
						"id": "46086333-403f-49e1-b30e-4cb8b62a5125",
						"exec": [
							"pm.test(\"Response code \", function () {\r",
							"    pm.response.to.have.status(200);\r",
							"});\r",
							"\r",
							"var jsonData = pm.response.json();\r",
							"try {\r",
							"    response = jsonData.result.status.description\r",
							"}\r",
							"catch (err) {\r",
							"    pm.test(\"FAIL: \", () => { throw new Error(\"Exception in parsing response\") });\r",
							"}\r",
							"\r",
							"pm.test(\"DAgent reponse is...\"+response, function () {\r",
							"       pm.expect(response).is.to.equal(\"Success\");\r",
							"    \r",
							"});"
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "POST",
				"header": [
					{
						"key": "x-access-token",
						"type": "text",
						"value": "{{token}}"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\"name\": \"{{volNameArr1}}0\", \"array\": \"{{arrayName1}}\"}",
					"options": {
						"raw": {
							"language": "json"
						}
					}
				},
				"url": {
					"raw": "http://{{host}}:{{port}}/api/v1.0/volume/mount",
					"protocol": "http",
					"host": [
						"{{host}}"
					],
					"port": "{{port}}",
					"path": [
						"api",
						"v1.0",
						"volume",
						"mount"
					]
				}
			},
			"response": []
		},
		{
			"name": "mount vol_arr2_0 in 2nd array",
			"event": [
				{
					"listen": "test",
					"script": {
						"id": "33c5b8c8-6ee4-4c1c-b3f3-63fc7a1e52a6",
						"exec": [
							"pm.test(\"Response code \", function () {\r",
							"    pm.response.to.have.status(200);\r",
							"});\r",
							"\r",
							"var jsonData = pm.response.json();\r",
							"try {\r",
							"    response = jsonData.result.status.description\r",
							"}\r",
							"catch (err) {\r",
							"    pm.test(\"FAIL: \", () => { throw new Error(\"Exception in parsing response\") });\r",
							"}\r",
							"\r",
							"pm.test(\"DAgent reponse is...\"+response, function () {\r",
							"       pm.expect(response).is.to.equal(\"Success\");\r",
							"    \r",
							"});"
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "POST",
				"header": [
					{
						"key": "x-access-token",
						"type": "text",
						"value": "{{token}}"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\"name\": \"{{volNameArr2}}0\", \"array\": \"{{arrayName2}}\"}",
					"options": {
						"raw": {
							"language": "json"
						}
					}
				},
				"url": {
					"raw": "http://{{host}}:{{port}}/api/v1.0/volume/mount",
					"protocol": "http",
					"host": [
						"{{host}}"
					],
					"port": "{{port}}",
					"path": [
						"api",
						"v1.0",
						"volume",
						"mount"
					]
				}
			},
			"response": []
		},
		{
			"name": "Delete Volume in 1st array",
			"event": [
				{
					"listen": "test",
					"script": {
						"id": "a87d8ea9-97e3-4f8a-a95c-aff4c4cb3d3a",
						"exec": [
							"pm.test(\"Delete volume successful...\", function () {\r",
							"    pm.response.to.have.status(200);\r",
							"});"
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "POST",
				"header": [
					{
						"key": "x-access-token",
						"type": "text",
						"value": "{{token}}"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\"volumes\": [\"{{volNameArr1}}0\"]}",
					"options": {
						"raw": {
							"language": "json"
						}
					}
				},
				"url": {
					"raw": "http://{{host}}:{{port}}/api/v1.0/delete_volumes/{{arrayName1}}",
					"protocol": "http",
					"host": [
						"{{host}}"
					],
					"port": "{{port}}",
					"path": [
						"api",
						"v1.0",
						"delete_volumes",
						"{{arrayName1}}"
					]
				}
			},
			"response": []
		},
		{
			"name": "Delete Volume in 2nd array",
			"event": [
				{
					"listen": "test",
					"script": {
						"id": "06f90694-6aad-4d85-8e39-b1ec237e26bc",
						"exec": [
							"pm.test(\"Delete volume successful...\", function () {\r",
							"    pm.response.to.have.status(200);\r",
							"});"
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "POST",
				"header": [
					{
						"key": "x-access-token",
						"type": "text",
						"value": "{{token}}"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\"volumes\": [\"{{volNameArr2}}0\"]}",
					"options": {
						"raw": {
							"language": "json"
						}
					}
				},
				"url": {
					"raw": "http://{{host}}:{{port}}/api/v1.0/delete_volumes/{{arrayName2}}",
					"protocol": "http",
					"host": [
						"{{host}}"
					],
					"port": "{{port}}",
					"path": [
						"api",
						"v1.0",
						"delete_volumes",
						"{{arrayName2}}"
					]
				}
			},
			"response": []
		},
		{
			"name": "Get get_all_volumes",
			"event": [
				{
					"listen": "test",
					"script": {
						"id": "b24a8518-1879-429e-9692-0257eabfd974",
						"exec": [
							"pm.test(\"Get Volume data is successful...\", function () {\r",
							"    pm.response.to.have.status(200);\r",
							"});\r",
							"\r",
							"\r",
							"pm.test(\"Verify volume count\", function () {\r",
							"    // console.log(\"len \",volArr.length)\r",
							"\r",
							"    var jsonData = pm.response.json();\r",
							"\r",
							"    var count = jsonData.length;\r",
							"    console.log(\"count \", count)\r",
							"\r",
							"    pm.expect(count).to.be.above(0);\r",
							"\r",
							"});\r",
							""
						],
						"type": "text/javascript"
					}
				},
				{
					"listen": "prerequest",
					"script": {
						"id": "434214fb-6b18-4375-88b9-f69b63a2e417",
						"exec": [
							""
						],
						"type": "text/javascript"
					}
				}
			],
			"protocolProfileBehavior": {
				"disableBodyPruning": true
			},
			"request": {
				"method": "GET",
				"header": [
					{
						"key": "x-access-token",
						"type": "text",
						"value": "{{token}}"
					}
				],
				"body": {
					"mode": "raw",
					"raw": ""
				},
				"url": {
					"raw": "http://{{host}}:{{port}}/api/v1/get_all_volumes/",
					"protocol": "http",
					"host": [
						"{{host}}"
					],
					"port": "{{port}}",
					"path": [
						"api",
						"v1",
						"get_all_volumes",
						""
					]
				}
			},
			"response": []
		},
		{
			"name": "logout",
			"event": [
				{
					"listen": "test",
					"script": {
						"id": "e2d29b28-cfc3-48d3-a425-5e97c9f5a6d3",
						"exec": [
							"// save the response into a local variable so that we can access it later in the script\r",
							"let response = pm.response.json();\r",
							"\r",
							"// retrieve the token value from the response\r",
							"let token =  response[\"token\"];\r",
							"\r",
							"// save the token value to variables so that it can used in subsequent APIs\r",
							"pm.variables.set('token', '');\r",
							"\r",
							"pm.test(\"Logout complete...\", function () {\r",
							"    pm.response.to.have.status(200);\r",
							"});"
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "POST",
				"header": [],
				"body": {
					"mode": "raw",
					"raw": "{\"username\":\"admin\",\"password\":\"admin\"}",
					"options": {
						"raw": {
							"language": "json"
						}
					}
				},
				"url": {
					"raw": "http://{{host}}:{{port}}/api/v1.0/login/",
					"protocol": "http",
					"host": [
						"{{host}}"
					],
					"port": "{{port}}",
					"path": [
						"api",
						"v1.0",
						"login",
						""
					]
				},
				"description": "login to MTool"
			},
			"response": []
		}
	],
	"event": [
		{
			"listen": "prerequest",
			"script": {
				"id": "053a1b6a-fe96-481c-8cbb-37400e33107b",
				"type": "text/javascript",
				"exec": [
					""
				]
			}
		},
		{
			"listen": "test",
			"script": {
				"id": "4638b7d4-8a80-4a80-9339-4529b64c5712",
				"type": "text/javascript",
				"exec": [
					""
				]
			}
		}
	],
	"protocolProfileBehavior": {}
}