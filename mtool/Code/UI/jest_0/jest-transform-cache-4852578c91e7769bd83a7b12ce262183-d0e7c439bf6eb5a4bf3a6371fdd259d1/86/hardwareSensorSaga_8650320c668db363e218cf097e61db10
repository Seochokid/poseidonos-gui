0ec00f4edcf738a205e7fd3cb44aea54
"use strict";

var _interopRequireWildcard = require("/home/ibof07/pk/ibofmgmt/Code/UI/node_modules/@babel/runtime/helpers/interopRequireWildcard");

var _interopRequireDefault = require("/home/ibof07/pk/ibofmgmt/Code/UI/node_modules/@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.fetchPowerSensorInfo = fetchPowerSensorInfo;
exports.fetchFanSensorInfo = fetchFanSensorInfo;
exports.fetchTemperatureSensorInfo = fetchTemperatureSensorInfo;
exports.hardwareSensorWatcher = hardwareSensorWatcher;

var _axios = _interopRequireDefault(require("axios"));

var _effects = require("redux-saga/effects");

var actionTypes = _interopRequireWildcard(require("../store/actions/actionTypes"));

var actionCreators = _interopRequireWildcard(require("../store/actions/exportActionCreators"));

/* -------------------------------------------------------------------------------------/
                                                                                    /
/               COPYRIGHT (c) 2019 SAMSUNG ELECTRONICS CO., LTD.                      /
/                          ALL RIGHTS RESERVED                                        /
/                                                                                     /
/   Permission is hereby granted to licensees of Samsung Electronics Co., Ltd.        /
/   products to use or abstract this computer program for the sole purpose of         /
/   implementing a product based on Samsung Electronics Co., Ltd. products.           /
/   No other rights to reproduce, use, or disseminate this computer program,          /
/   whether in part or in whole, are granted.                                         / 
/                                                                                     /
/   Samsung Electronics Co., Ltd. makes no representation or warranties with          /
/   respect to the performance of this computer program, and specifically disclaims   /
/   any responsibility for any damages, special or consequential, connected           /
/   with the use of this program.                                                     /
/                                                                                     /
/-------------------------------------------------------------------------------------/

DESCRIPTION: <Contains Generator Functions for hardware container> *
@NAME : hardwareSensorSaga.js
@AUTHORS: Jay Sanghavi 
@Version : 1.0 *
@REVISION HISTORY
[03/11/2019] [Jay] : Prototyping..........////////////////////
*/
function* fetchPowerSensorInfo() {
  try {
    // yield put(actionCreators.startLoader('Fetching BMC Information'));
    const response = yield (0, _effects.call)([_axios.default, _axios.default.get], '/api/v1.0/get_power_sensor_info/', {
      headers: {
        Accept: 'application/json',
        'Content-Type': 'application/json',
        'x-access-token': localStorage.getItem('token')
      }
    });
    yield (0, _effects.put)(actionCreators.stopLoader());
    const result = response.data;

    if (result) {
      yield (0, _effects.put)(actionCreators.fetchPowerSensorInfo(result.power_sensor_info));
    }
  } catch (error) {
    yield (0, _effects.put)(actionCreators.stopLoader());
    yield (0, _effects.put)(actionCreators.fetchPowerSensorInfo([]));
  } finally {
    ;
  }
}

function* fetchFanSensorInfo() {
  try {
    yield (0, _effects.put)(actionCreators.startLoader('Fetching BMC Information'));
    const response = yield (0, _effects.call)([_axios.default, _axios.default.get], '/api/v1.0/get_fan_sensor_info/', {
      headers: {
        Accept: 'application/json',
        'Content-Type': 'application/json',
        'x-access-token': localStorage.getItem('token')
      }
    });
    yield (0, _effects.put)(actionCreators.stopLoader());
    const result = response.data;

    if (result) {
      yield (0, _effects.put)(actionCreators.fetchFanSensorInfo(result.fan_sensor_info));
    }
  } catch (error) {
    yield (0, _effects.put)(actionCreators.stopLoader());
    yield (0, _effects.put)(actionCreators.fetchFanSensorInfo([]));
  } finally {
    ;
  }
}

function* fetchTemperatureSensorInfo() {
  try {
    yield (0, _effects.put)(actionCreators.startLoader('Fetching BMC Information'));
    const response = yield (0, _effects.call)([_axios.default, _axios.default.get], '/api/v1.0/get_temperature_sensor_info/', {
      headers: {
        Accept: 'application/json',
        'Content-Type': 'application/json',
        'x-access-token': localStorage.getItem('token')
      }
    });
    yield (0, _effects.put)(actionCreators.stopLoader());
    const result = response.data;

    if (result) {
      yield (0, _effects.put)(actionCreators.fetchTemperatureSensorInfo(result.temperature_sensor_info));
    }
  } catch (error) {
    yield (0, _effects.put)(actionCreators.stopLoader());
    yield (0, _effects.put)(actionCreators.fetchTemperatureSensorInfo([]));
  } finally {
    ;
  }
}

function* hardwareSensorWatcher() {
  yield (0, _effects.takeEvery)(actionTypes.SAGA_HARDWARE_SENSORS_FETCH_POWER_SENSOR_INFORMATION, fetchPowerSensorInfo);
  yield (0, _effects.takeEvery)(actionTypes.SAGA_HARDWARE_SENSORS_FETCH_FAN_SENSOR_INFORMATION, fetchFanSensorInfo);
  yield (0, _effects.takeEvery)(actionTypes.SAGA_HARDWARE_SENSORS_FETCH_TEMPERATURE_SENSOR_INFORMATION, fetchTemperatureSensorInfo);
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImhhcmR3YXJlU2Vuc29yU2FnYS5qcyJdLCJuYW1lcyI6WyJmZXRjaFBvd2VyU2Vuc29ySW5mbyIsInJlc3BvbnNlIiwiYXhpb3MiLCJnZXQiLCJoZWFkZXJzIiwiQWNjZXB0IiwibG9jYWxTdG9yYWdlIiwiZ2V0SXRlbSIsImFjdGlvbkNyZWF0b3JzIiwic3RvcExvYWRlciIsInJlc3VsdCIsImRhdGEiLCJwb3dlcl9zZW5zb3JfaW5mbyIsImVycm9yIiwiZmV0Y2hGYW5TZW5zb3JJbmZvIiwic3RhcnRMb2FkZXIiLCJmYW5fc2Vuc29yX2luZm8iLCJmZXRjaFRlbXBlcmF0dXJlU2Vuc29ySW5mbyIsInRlbXBlcmF0dXJlX3NlbnNvcl9pbmZvIiwiaGFyZHdhcmVTZW5zb3JXYXRjaGVyIiwiYWN0aW9uVHlwZXMiLCJTQUdBX0hBUkRXQVJFX1NFTlNPUlNfRkVUQ0hfUE9XRVJfU0VOU09SX0lORk9STUFUSU9OIiwiU0FHQV9IQVJEV0FSRV9TRU5TT1JTX0ZFVENIX0ZBTl9TRU5TT1JfSU5GT1JNQVRJT04iLCJTQUdBX0hBUkRXQVJFX1NFTlNPUlNfRkVUQ0hfVEVNUEVSQVRVUkVfU0VOU09SX0lORk9STUFUSU9OIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7OztBQTBCQTs7QUFDQTs7QUFDQTs7QUFDQTs7QUE3QkE7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUErQk8sVUFBVUEsb0JBQVYsR0FBaUM7QUFDcEMsTUFBSTtBQUNBO0FBQ0EsVUFBTUMsUUFBUSxHQUFHLE1BQU0sbUJBQUssQ0FBQ0MsY0FBRCxFQUFRQSxlQUFNQyxHQUFkLENBQUwsRUFBeUIsa0NBQXpCLEVBQTZEO0FBQ2hGQyxNQUFBQSxPQUFPLEVBQUU7QUFDTEMsUUFBQUEsTUFBTSxFQUFFLGtCQURIO0FBRUwsd0JBQWdCLGtCQUZYO0FBR0wsMEJBQWtCQyxZQUFZLENBQUNDLE9BQWIsQ0FBcUIsT0FBckI7QUFIYjtBQUR1RSxLQUE3RCxDQUF2QjtBQU9BLFVBQU0sa0JBQUlDLGNBQWMs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TjtBQUVIIiwic291cmNlc0NvbnRlbnQiOlsiLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC9cbi8gICAgICAgICAgICAgICBDT1BZUklHSFQgKGMpIDIwMTkgU0FNU1VORyBFTEVDVFJPTklDUyBDTy4sIExURC4gICAgICAgICAgICAgICAgICAgICAgL1xuLyAgICAgICAgICAgICAgICAgICAgICAgICAgQUxMIFJJR0hUUyBSRVNFUlZFRCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvXG4vICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC9cbi8gICBQZXJtaXNzaW9uIGlzIGhlcmVieSBncmFudGVkIHRvIGxpY2Vuc2VlcyBvZiBTYW1zdW5nIEVsZWN0cm9uaWNzIENvLiwgTHRkLiAgICAgICAgL1xuLyAgIHByb2R1Y3RzIHRvIHVzZSBvciBhYnN0cmFjdCB0aGlzIGNvbXB1dGVyIHByb2dyYW0gZm9yIHRoZSBzb2xlIHB1cnBvc2Ugb2YgICAgICAgICAvXG4vICAgaW1wbGVtZW50aW5nIGEgcHJvZHVjdCBiYXNlZCBvbiBTYW1zdW5nIEVsZWN0cm9uaWNzIENvLiwgTHRkLiBwcm9kdWN0cy4gICAgICAgICAgIC9cbi8gICBObyBvdGhlciByaWdodHMgdG8gcmVwcm9kdWNlLCB1c2UsIG9yIGRpc3NlbWluYXRlIHRoaXMgY29tcHV0ZXIgcHJvZ3JhbSwgICAgICAgICAgL1xuLyAgIHdoZXRoZXIgaW4gcGFydCBvciBpbiB3aG9sZSwgYXJlIGdyYW50ZWQuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvIFxuLyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvXG4vICAgU2Ftc3VuZyBFbGVjdHJvbmljcyBDby4sIEx0ZC4gbWFrZXMgbm8gcmVwcmVzZW50YXRpb24gb3Igd2FycmFudGllcyB3aXRoICAgICAgICAgIC9cbi8gICByZXNwZWN0IHRvIHRoZSBwZXJmb3JtYW5jZSBvZiB0aGlzIGNvbXB1dGVyIHByb2dyYW0sIGFuZCBzcGVjaWZpY2FsbHkgZGlzY2xhaW1zICAgL1xuLyAgIGFueSByZXNwb25zaWJpbGl0eSBmb3IgYW55IGRhbWFnZXMsIHNwZWNpYWwgb3IgY29uc2VxdWVudGlhbCwgY29ubmVjdGVkICAgICAgICAgICAvXG4vICAgd2l0aCB0aGUgdXNlIG9mIHRoaXMgcHJvZ3JhbS4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC9cbi8gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgL1xuLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0vXG5cbkRFU0NSSVBUSU9OOiA8Q29udGFpbnMgR2VuZXJhdG9yIEZ1bmN0aW9ucyBmb3IgaGFyZHdhcmUgY29udGFpbmVyPiAqXG5ATkFNRSA6IGhhcmR3YXJlU2Vuc29yU2FnYS5qc1xuQEFVVEhPUlM6IEpheSBTYW5naGF2aSBcbkBWZXJzaW9uIDogMS4wICpcbkBSRVZJU0lPTiBISVNUT1JZXG5bMDMvMTEvMjAxOV0gW0pheV0gOiBQcm90b3R5cGluZy4uLi4uLi4uLi4vLy8vLy8vLy8vLy8vLy8vLy8vL1xuKi9cblxuaW1wb3J0IGF4aW9zIGZyb20gJ2F4aW9zJztcbmltcG9ydCB7IGNhbGwsIHRha2VFdmVyeSwgcHV0IH0gZnJvbSAncmVkdXgtc2FnYS9lZmZlY3RzJztcbmltcG9ydCAqIGFzIGFjdGlvblR5cGVzIGZyb20gJy4uL3N0b3JlL2FjdGlvbnMvYWN0aW9uVHlwZXMnO1xuaW1wb3J0ICogYXMgYWN0aW9uQ3JlYXRvcnMgZnJvbSAnLi4vc3RvcmUvYWN0aW9ucy9leHBvcnRBY3Rpb25DcmVhdG9ycyc7XG5cbmV4cG9ydCBmdW5jdGlvbiogZmV0Y2hQb3dlclNlbnNvckluZm8oKSB7XG4gICAgdHJ5IHtcbiAgICAgICAgLy8geWllbGQgcHV0KGFjdGlvbkNyZWF0b3JzLnN0YXJ0TG9hZGVyKCdGZXRjaGluZyBCTUMgSW5mb3JtYXRpb24nKSk7XG4gICAgICAgIGNvbnN0IHJlc3BvbnNlID0geWllbGQgY2FsbChbYXhpb3MsIGF4aW9zLmdldF0sICcvYXBpL3YxLjAvZ2V0X3Bvd2VyX3NlbnNvcl9pbmZvLycsIHtcbiAgICAgICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgICAgICBBY2NlcHQ6ICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgICAgICAgICAgICd4LWFjY2Vzcy10b2tlbic6IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCd0b2tlbicpLFxuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgeWllbGQgcHV0KGFjdGlvbkNyZWF0b3JzLnN0b3BMb2FkZXIoKSk7XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IHJlc3BvbnNlLmRhdGE7XG4gICAgICAgIGlmIChyZXN1bHQpIHtcbiAgICAgICAgICAgIHlpZWxkIHB1dChhY3Rpb25DcmVhdG9ycy5mZXRjaFBvd2VyU2Vuc29ySW5mbyhyZXN1bHQucG93ZXJfc2Vuc29yX2luZm8pKTtcbiAgICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIHlpZWxkIHB1dChhY3Rpb25DcmVhdG9ycy5zdG9wTG9hZGVyKCkpO1xuICAgICAgICB5aWVsZCBwdXQoYWN0aW9uQ3JlYXRvcnMuZmV0Y2hQb3dlclNlbnNvckluZm8oW10pKTtcbiAgICB9XG4gICAgZmluYWxseSB7XG4gICAgICAgIDtcbiAgICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiogZmV0Y2hGYW5TZW5zb3JJbmZvKCkge1xuICAgIFxuICAgIHRyeSB7XG4gICAgICAgIHlpZWxkIHB1dChhY3Rpb25DcmVhdG9ycy5zdGFydExvYWRlcignRmV0Y2hpbmcgQk1DIEluZm9ybWF0aW9uJykpO1xuICAgICAgICBjb25zdCByZXNwb25zZSA9IHlpZWxkIGNhbGwoW2F4aW9zLCBheGlvcy5nZXRdLCAnL2FwaS92MS4wL2dldF9mYW5fc2Vuc29yX2luZm8vJywge1xuICAgICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgICAgIEFjY2VwdDogJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgICAgICAgICAgJ3gtYWNjZXNzLXRva2VuJzogbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3Rva2VuJyksXG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICB5aWVsZCBwdXQoYWN0aW9uQ3JlYXRvcnMuc3RvcExvYWRlcigpKTtcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gcmVzcG9uc2UuZGF0YTtcbiAgICAgICAgaWYgKHJlc3VsdCkge1xuICAgICAgICAgICAgeWllbGQgcHV0KGFjdGlvbkNyZWF0b3JzLmZldGNoRmFuU2Vuc29ySW5mbyhyZXN1bHQuZmFuX3NlbnNvcl9pbmZvKSk7XG4gICAgICAgIH1cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICB5aWVsZCBwdXQoYWN0aW9uQ3JlYXRvcnMuc3RvcExvYWRlcigpKTtcbiAgICAgICAgeWllbGQgcHV0KGFjdGlvbkNyZWF0b3JzLmZldGNoRmFuU2Vuc29ySW5mbyhbXSkpO1xuICAgIH1cbiAgICBmaW5hbGx5IHtcbiAgICAgICAgO1xuICAgIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uKiBmZXRjaFRlbXBlcmF0dXJlU2Vuc29ySW5mbygpIHtcbiAgICB0cnkge1xuICAgICAgICB5aWVsZCBwdXQoYWN0aW9uQ3JlYXRvcnMuc3RhcnRMb2FkZXIoJ0ZldGNoaW5nIEJNQyBJbmZvcm1hdGlvbicpKTtcbiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSB5aWVsZCBjYWxsKFtheGlvcywgYXhpb3MuZ2V0XSwgJy9hcGkvdjEuMC9nZXRfdGVtcGVyYXR1cmVfc2Vuc29yX2luZm8vJywge1xuICAgICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgICAgIEFjY2VwdDogJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgICAgICAgICAgJ3gtYWNjZXNzLXRva2VuJzogbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3Rva2VuJyksXG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICB5aWVsZCBwdXQoYWN0aW9uQ3JlYXRvcnMuc3RvcExvYWRlcigpKTtcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gcmVzcG9uc2UuZGF0YTtcbiAgICAgICAgaWYgKHJlc3VsdCkge1xuICAgICAgICAgICAgeWllbGQgcHV0KGFjdGlvbkNyZWF0b3JzLmZldGNoVGVtcGVyYXR1cmVTZW5zb3JJbmZvKHJlc3VsdC50ZW1wZXJhdHVyZV9zZW5zb3JfaW5mbykpO1xuICAgICAgICB9XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgeWllbGQgcHV0KGFjdGlvbkNyZWF0b3JzLnN0b3BMb2FkZXIoKSk7XG4gICAgICAgIHlpZWxkIHB1dChhY3Rpb25DcmVhdG9ycy5mZXRjaFRlbXBlcmF0dXJlU2Vuc29ySW5mbyhbXSkpO1xuICAgIH1cbiAgICBmaW5hbGx5IHtcbiAgICAgICAgO1xuICAgIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uKiBoYXJkd2FyZVNlbnNvcldhdGNoZXIoKSB7XG4gICAgeWllbGQgdGFrZUV2ZXJ5KGFjdGlvblR5cGVzLlNBR0FfSEFSRFdBUkVfU0VOU09SU19GRVRDSF9QT1dFUl9TRU5TT1JfSU5GT1JNQVRJT04sIGZldGNoUG93ZXJTZW5zb3JJbmZvKTtcbiAgICB5aWVsZCB0YWtlRXZlcnkoYWN0aW9uVHlwZXMuU0FHQV9IQVJEV0FSRV9TRU5TT1JTX0ZFVENIX0ZBTl9TRU5TT1JfSU5GT1JNQVRJT04sIGZldGNoRmFuU2Vuc29ySW5mbyk7XG4gICAgeWllbGQgdGFrZUV2ZXJ5KGFjdGlvblR5cGVzLlNBR0FfSEFSRFdBUkVfU0VOU09SU19GRVRDSF9URU1QRVJBVFVSRV9TRU5TT1JfSU5GT1JNQVRJT04sIGZldGNoVGVtcGVyYXR1cmVTZW5zb3JJbmZvKTtcblxufVxuIl19