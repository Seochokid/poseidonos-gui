625996a3f7757a495a8d6b01765a9bdb
"use strict";

var _interopRequireWildcard = require("/home/ibof07/pk/ibofmgmt/Code/UI/node_modules/@babel/runtime/helpers/interopRequireWildcard");

var _interopRequireDefault = require("/home/ibof07/pk/ibofmgmt/Code/UI/node_modules/@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = headerWatcher;

var _axios = _interopRequireDefault(require("axios"));

var _effects = require("redux-saga/effects");

var actionTypes = _interopRequireWildcard(require("../store/actions/actionTypes"));

var actionCreators = _interopRequireWildcard(require("../store/actions/exportActionCreators"));

/* -------------------------------------------------------------------------------------/
                                                                                    /
/               COPYRIGHT (c) 2019 SAMSUNG ELECTRONICS CO., LTD.                      /
/                          ALL RIGHTS RESERVED                                        /
/                                                                                     /
/   Permission is hereby granted to licensees of Samsung Electronics Co., Ltd.        /
/   products to use or abstract this computer program for the sole purpose of         /
/   implementing a product based on Samsung Electronics Co., Ltd. products.           /
/   No other rights to reproduce, use, or disseminate this computer program,          /
/   whether in part or in whole, are granted.                                         / 
/                                                                                     /
/   Samsung Electronics Co., Ltd. makes no representation or warranties with          /
/   respect to the performance of this computer program, and specifically disclaims   /
/   any responsibility for any damages, special or consequential, connected           /
/   with the use of this program.                                                     /
/                                                                                     /
/-------------------------------------------------------------------------------------/


DESCRIPTION: <Contains Generator Functions for header component> *
@NAME : headerSaga.js
@AUTHORS: Jay Hitesh Sanghavi 
@Version : 1.0 *
@REVISION HISTORY
[03/06/2019] [Jay] : Prototyping..........////////////////////
*/
function* CallIsiBOFOSRunning(action) {
  try {
    const response = yield (0, _effects.call)([_axios.default, _axios.default.get], '/api/v1.0/get_Is_Ibof_OS_Running/', {
      headers: {
        Accept: 'application/json',
        'Content-Type': 'application/json',
        'x-access-token': localStorage.getItem('token')
      }
    });

    if (response && response.status === 401) {
      action.payload.push('/');
      localStorage.setItem('isLoggedIn', false);
      localStorage.setItem('BMC_LoggedIn', false);
    }

    if (response && response.status === 500) {
      yield (0, _effects.put)(actionCreators.asyncIsiBOFOSRunning(false, "Not Running"));
    }

    const result = response.data;
    if (result) yield (0, _effects.put)(actionCreators.updateTimestamp(result.lastRunningTime));

    if (result && result.RESULT && result.RESULT.result && result.RESULT.result.data && result.RESULT.result.data.type && result.RESULT.result.data.type.toUpperCase() === "NORMAL") {
      yield (0, _effects.put)(actionCreators.asyncIsiBOFOSRunning(true, "Running"));
    } else if (result && result.code === "2804" && result.value !== "100") {
      if (result.timestamp !== "") yield (0, _effects.put)(actionCreators.updateTimestamp(result.timestamp));
      let percentage = "";

      if (result && result.value !== "") {
        percentage = `Rebuilding: ${result.value}%`;
        localStorage.setItem('Rebuilding_Value', result.value);
        yield (0, _effects.put)(actionCreators.asyncIsiBOFOSRunning(false, percentage));
      } else yield (0, _effects.put)(actionCreators.asyncIsiBOFOSRunning(false, "Rebuilding: Value Not Found"));
    } else yield (0, _effects.put)(actionCreators.asyncIsiBOFOSRunning(false, "Not Running"));
  } catch (e) {
    if (e.message.indexOf("401") >= 0) {
      action.payload.push("/");
    }

    yield (0, _effects.put)(actionCreators.asyncIsiBOFOSRunning(false, "Not Running"));
  }
}

function* headerWatcher() {
  yield (0, _effects.takeEvery)(actionTypes.SAGA_GET_IS_IBOF_OS_RUNNING, CallIsiBOFOSRunning);
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImhlYWRlclNhZ2EuanMiXSwibmFtZXMiOlsiQ2FsbElzaUJPRk9TUnVubmluZyIsImFjdGlvbiIsInJlc3BvbnNlIiwiYXhpb3MiLCJnZXQiLCJoZWFkZXJzIiwiQWNjZXB0IiwibG9jYWxTdG9yYWdlIiwiZ2V0SXRlbSIsInN0YXR1cyIsInBheWxvYWQiLCJwdXNoIiwic2V0SXRlbSIsImFjdGlvbkNyZWF0b3JzIiwiYXN5bmNJc2lCT0ZPU1J1bm5pbmciLCJyZXN1bHQiLCJkYXRhIiwidXBkYXRlVGltZXN0YW1wIiwibGFzdFJ1bm5pbmdUaW1lIiwiUkVTVUxUIiwidHlwZSIsInRvVXBwZXJDYXNlIiwiY29kZSIsInZhbHVlIiwidGltZXN0YW1wIiwicGVyY2VudGFnZSIsImUiLCJtZXNzYWdlIiwiaW5kZXhPZiIsImhlYWRlcldhdGNoZXIiLCJhY3Rpb25UeXBlcyIsIlNBR0FfR0VUX0lTX0lCT0ZfT1NfUlVOTklORyJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7QUEwQkE7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBN0JBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQWdDQSxVQUFVQSxtQkFBVixDQUE4QkMsTUFBOUIsRUFBc0M7QUFDbEMsTUFBSTtBQUNBLFVBQU1DLFFBQVEsR0FBRyxNQUFNLG1CQUFLLENBQUNDLGNBQUQsRUFBUUEsZUFBTUMsR0FBZCxDQUFMLEVBQXlCLG1DQUF6QixFQUE2RDtBQUNoRkMsTUFBQUEsT0FBTyxFQUFFO0FBQ0xDLFFBQUFBLE1BQU0sRUFBRSxrQkFESDtBQUVMLHdCQUFnQixrQkFGWDtBQUdMLDBCQUFrQkMsWUFBWSxDQUFDQyxPQUFiLENBQXFCLE9BQXJCO0FBSGI7QUFEdUUsS0FBN0QsQ0FBdkI7O0FBT0EsUUFBR04sUUFBUSxJQUFJQSxRQUFRLENBQUNPLE1BQVQsS0FBb0IsR0FBbkMsRUFBd0M7QUFDcENSLE1BQUFBLE1BQU0sQ0FBQ1MsT0FBUCxDQUFlQyxJQUFmLENBQW9CLEdBQXBCO0FBQ0FKLE1BQUFBLFlBQVksQ0FBQ0ssT0FBYixDQUFxQixZQUFyQixFQUFrQyxLQUFsQztBQUNBTCxNQUFBQSxZQUFZLENBQUNLLE9BQWIsQ0FBcUIsY0FBckIsRUFBb0MsS0FBcEM7QUFDSDs7QUFDRCxRQUFJVixRQUFRLElBQUlBLFFBQVEsQ0FBQ08sTUFBVCxLQUFvQixHQUFwQyxFQUF5QztBQUNyQyxZQUFNLGtCQUFJSSxjQUFjLENBQUNDLG9CQUFmLENBQW9DLEtBQXBDLEVBQTJDLGFBQTNDLENBQUosQ0FBTjtBQUNIOztBQUNELFVBQU1DLE1BQU0sR0FBR2IsUUFBUSxDQUFDYyxJQUF4QjtBQUNBLFFBQUlELE1BQUosRUFDSSxNQUFNLGtCQUFJRixjQUFjLENBQUNJLGVBQWYsQ0FBK0JGLE1BQU0sQ0FBQ0csZUFBdEMsQ0FBSixDQUFOOztBQUNKLFFBQUlILE1BQU0sSUFBSUEsTUFBTSxDQUFDSSxNQUFqQixJQUEyQkosTUFBTSxDQUFDSSxNQUFQLENBQWNKLE1BQXpDLElBQW1EQSxNQUFNLENBQUNJLE1BQVAsQ0FBY0osTUFBZCxDQUFxQkMsSUFBeEUsSUFBZ0ZELE1BQU0sQ0FBQ0ksTUFBUCxDQUFjSixNQUFkLENBQXFCQyxJQUFyQixDQUEwQkksSUFBMUcsSUFBa0hMLE1BQU0sQ0FBQ0ksTUFBUCxDQUFjSixNQUFkLENBQXFCQyxJQUFyQixDQUEwQkksSUFBMUIsQ0FBK0JDLFdBQS9CLE9BQWlELFFBQXZLLEVBQWlMO0FBQzdLLFlBQU0sa0JBQUlSLGNBQWMsQ0FBQ0Msb0JBQWYsQ0FBb0MsSUFBcEMsRUFBMEMsU0FBMUMsQ0FBSixDQUFOO0FBQ0gsS0FGRCxNQUdLLElBQUlDLE1BQU0sSUFBSUEsTUFBTSxDQUFDTyxJQUFQLEtBQWdCLE1BQTFCLElBQW9DUCxNQUFNLENBQUNRLEtBQVAsS0FBaUIsS0FBekQsRUFBZ0U7QUFDakUsVUFBR1IsTUFBTSxDQUFDUyxTQUFQLEtBQXFCLEVBQXhCLEVBQ0ksTUFBTSxrQkFBSVgsY0FBYyxDQUFDSSxlQUFmLENBQStCRixNQUFNLENBQUNTLFNBQXRDLENBQUosQ0FBTjtBQUNKLFVBQUlDLFVBQVUsR0FBRyxFQUFqQjs7QUFDQSxVQUFJVixNQUFNLElBQUlBLE1BQU0sQ0FBQ1EsS0FBUCxLQUFpQixFQUEvQixFQUFtQztBQUMvQkUsUUFBQUEsVUFBVSxHQUFJLGVBQWNWLE1BQU0sQ0FBQ1EsS0FBTSxHQUF6QztBQUNBaEIsUUFBQUEsWUFBWSxDQUFDSyxPQUFiLENBQXFCLGtCQUFyQixFQUF5Q0csTUFBTSxDQUFDUSxLQUFoRDtBQUNBLGNBQU0sa0JBQUlWLGNBQWMsQ0FBQ0Msb0JBQWYsQ0FBb0MsS0FBcEMsRUFBMkNXLFVBQTNDLENBQUosQ0FBTjtBQUNILE9BSkQsTUFLSyxNQUFNLGtCQUFJWixjQUFjLENBQUNDLG9CQUFmLENBQW9DLEtBQXBDLEVBQTJDLDZCQUEzQyxDQUFKLENBQU47QUFDUixLQVZJLE1BV0EsTUFBTSxrQkFBSUQsY0FBYyxDQUFDQyxvQkFBZixDQUFvQyxLQUFwQyxFQUEyQyxhQUEzQyxDQUFKLENBQU47QUFDUixHQWxDRCxDQW1DQSxPQUFPWSxDQUFQLEVBQVU7QUFDTixRQUFHQSxDQUFDLENBQUNDLE9BQUYsQ0FBVUMsT0FBVixDQUFrQixLQUFsQixLQUE0QixDQUEvQixFQUFrQztBQUM5QjNCLE1BQUFBLE1BQU0sQ0FBQ1MsT0FBUCxDQUFlQyxJQUFmLENBQW9CLEdBQXBCO0FBQ0g7O0FBQ0QsVUFBTSxrQkFBSUUsY0FBYyxDQUFDQyxvQkFBZixDQUFvQyxLQUFwQyxFQUEyQyxhQUEzQyxDQUFKLENBQU47QUFDSDtBQUVKOztBQUVjLFVBQVVlLGFBQVYsR0FBMEI7QUFDckMsUUFBTSx3QkFBVUMsV0FBVyxDQUFDQywyQkFBdEIsRUFBbUQvQixtQkFBbkQsQ0FBTjtBQUNIIiwic291cmNlc0NvbnRlbnQiOlsiLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC9cbi8gICAgICAgICAgICAgICBDT1BZUklHSFQgKGMpIDIwMTkgU0FNU1VORyBFTEVDVFJPTklDUyBDTy4sIExURC4gICAgICAgICAgICAgICAgICAgICAgL1xuLyAgICAgICAgICAgICAgICAgICAgICAgICAgQUxMIFJJR0hUUyBSRVNFUlZFRCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvXG4vICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC9cbi8gICBQZXJtaXNzaW9uIGlzIGhlcmVieSBncmFudGVkIHRvIGxpY2Vuc2VlcyBvZiBTYW1zdW5nIEVsZWN0cm9uaWNzIENvLiwgTHRkLiAgICAgICAgL1xuLyAgIHByb2R1Y3RzIHRvIHVzZSBvciBhYnN0cmFjdCB0aGlzIGNvbXB1dGVyIHByb2dyYW0gZm9yIHRoZSBzb2xlIHB1cnBvc2Ugb2YgICAgICAgICAvXG4vICAgaW1wbGVtZW50aW5nIGEgcHJvZHVjdCBiYXNlZCBvbiBTYW1zdW5nIEVsZWN0cm9uaWNzIENvLiwgTHRkLiBwcm9kdWN0cy4gICAgICAgICAgIC9cbi8gICBObyBvdGhlciByaWdodHMgdG8gcmVwcm9kdWNlLCB1c2UsIG9yIGRpc3NlbWluYXRlIHRoaXMgY29tcHV0ZXIgcHJvZ3JhbSwgICAgICAgICAgL1xuLyAgIHdoZXRoZXIgaW4gcGFydCBvciBpbiB3aG9sZSwgYXJlIGdyYW50ZWQuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvIFxuLyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvXG4vICAgU2Ftc3VuZyBFbGVjdHJvbmljcyBDby4sIEx0ZC4gbWFrZXMgbm8gcmVwcmVzZW50YXRpb24gb3Igd2FycmFudGllcyB3aXRoICAgICAgICAgIC9cbi8gICByZXNwZWN0IHRvIHRoZSBwZXJmb3JtYW5jZSBvZiB0aGlzIGNvbXB1dGVyIHByb2dyYW0sIGFuZCBzcGVjaWZpY2FsbHkgZGlzY2xhaW1zICAgL1xuLyAgIGFueSByZXNwb25zaWJpbGl0eSBmb3IgYW55IGRhbWFnZXMsIHNwZWNpYWwgb3IgY29uc2VxdWVudGlhbCwgY29ubmVjdGVkICAgICAgICAgICAvXG4vICAgd2l0aCB0aGUgdXNlIG9mIHRoaXMgcHJvZ3JhbS4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC9cbi8gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgL1xuLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0vXG5cblxuREVTQ1JJUFRJT046IDxDb250YWlucyBHZW5lcmF0b3IgRnVuY3Rpb25zIGZvciBoZWFkZXIgY29tcG9uZW50PiAqXG5ATkFNRSA6IGhlYWRlclNhZ2EuanNcbkBBVVRIT1JTOiBKYXkgSGl0ZXNoIFNhbmdoYXZpIFxuQFZlcnNpb24gOiAxLjAgKlxuQFJFVklTSU9OIEhJU1RPUllcblswMy8wNi8yMDE5XSBbSmF5XSA6IFByb3RvdHlwaW5nLi4uLi4uLi4uLi8vLy8vLy8vLy8vLy8vLy8vLy8vXG4qL1xuaW1wb3J0IGF4aW9zIGZyb20gJ2F4aW9zJztcbmltcG9ydCB7IGNhbGwsIHRha2VFdmVyeSwgcHV0IH0gZnJvbSAncmVkdXgtc2FnYS9lZmZlY3RzJztcbmltcG9ydCAqIGFzIGFjdGlvblR5cGVzIGZyb20gXCIuLi9zdG9yZS9hY3Rpb25zL2FjdGlvblR5cGVzXCI7XG5pbXBvcnQgKiBhcyBhY3Rpb25DcmVhdG9ycyBmcm9tIFwiLi4vc3RvcmUvYWN0aW9ucy9leHBvcnRBY3Rpb25DcmVhdG9yc1wiO1xuXG5cbmZ1bmN0aW9uKiBDYWxsSXNpQk9GT1NSdW5uaW5nKGFjdGlvbikge1xuICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IHJlc3BvbnNlID0geWllbGQgY2FsbChbYXhpb3MsIGF4aW9zLmdldF0sICcvYXBpL3YxLjAvZ2V0X0lzX0lib2ZfT1NfUnVubmluZy8nLHsgXG4gICAgICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgICAgICAgQWNjZXB0OiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICAgICAgICAgICAneC1hY2Nlc3MtdG9rZW4nOiBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgndG9rZW4nKSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH0pO1xuICAgICAgICBpZihyZXNwb25zZSAmJiByZXNwb25zZS5zdGF0dXMgPT09IDQwMSkge1xuICAgICAgICAgICAgYWN0aW9uLnBheWxvYWQucHVzaCgnLycpO1xuICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ2lzTG9nZ2VkSW4nLGZhbHNlKTtcbiAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdCTUNfTG9nZ2VkSW4nLGZhbHNlKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAocmVzcG9uc2UgJiYgcmVzcG9uc2Uuc3RhdHVzID09PSA1MDApIHtcbiAgICAgICAgICAgIHlpZWxkIHB1dChhY3Rpb25DcmVhdG9ycy5hc3luY0lzaUJPRk9TUnVubmluZyhmYWxzZSwgXCJOb3QgUnVubmluZ1wiKSk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgcmVzdWx0ID0gcmVzcG9uc2UuZGF0YTtcbiAgICAgICAgaWYgKHJlc3VsdClcbiAgICAgICAgICAgIHlpZWxkIHB1dChhY3Rpb25DcmVhdG9ycy51cGRhdGVUaW1lc3RhbXAocmVzdWx0Lmxhc3RSdW5uaW5nVGltZSkpO1xuICAgICAgICBpZiAocmVzdWx0ICYmIHJlc3VsdC5SRVNVTFQgJiYgcmVzdWx0LlJFU1VMVC5yZXN1bHQgJiYgcmVzdWx0LlJFU1VMVC5yZXN1bHQuZGF0YSAmJiByZXN1bHQuUkVTVUxULnJlc3VsdC5kYXRhLnR5cGUgJiYgcmVzdWx0LlJFU1VMVC5yZXN1bHQuZGF0YS50eXBlLnRvVXBwZXJDYXNlKCkgPT09IFwiTk9STUFMXCIpIHtcbiAgICAgICAgICAgIHlpZWxkIHB1dChhY3Rpb25DcmVhdG9ycy5hc3luY0lzaUJPRk9TUnVubmluZyh0cnVlLCBcIlJ1bm5pbmdcIikpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHJlc3VsdCAmJiByZXN1bHQuY29kZSA9PT0gXCIyODA0XCIgJiYgcmVzdWx0LnZhbHVlICE9PSBcIjEwMFwiKSB7XG4gICAgICAgICAgICBpZihyZXN1bHQudGltZXN0YW1wICE9PSBcIlwiKVxuICAgICAgICAgICAgICAgIHlpZWxkIHB1dChhY3Rpb25DcmVhdG9ycy51cGRhdGVUaW1lc3RhbXAocmVzdWx0LnRpbWVzdGFtcCkpO1xuICAgICAgICAgICAgbGV0IHBlcmNlbnRhZ2UgPSBcIlwiXG4gICAgICAgICAgICBpZiAocmVzdWx0ICYmIHJlc3VsdC52YWx1ZSAhPT0gXCJcIikge1xuICAgICAgICAgICAgICAgIHBlcmNlbnRhZ2UgPSBgUmVidWlsZGluZzogJHtyZXN1bHQudmFsdWV9JWA7XG4gICAgICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ1JlYnVpbGRpbmdfVmFsdWUnLCByZXN1bHQudmFsdWUpO1xuICAgICAgICAgICAgICAgIHlpZWxkIHB1dChhY3Rpb25DcmVhdG9ycy5hc3luY0lzaUJPRk9TUnVubmluZyhmYWxzZSwgcGVyY2VudGFnZSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB5aWVsZCBwdXQoYWN0aW9uQ3JlYXRvcnMuYXN5bmNJc2lCT0ZPU1J1bm5pbmcoZmFsc2UsIFwiUmVidWlsZGluZzogVmFsdWUgTm90IEZvdW5kXCIpKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHlpZWxkIHB1dChhY3Rpb25DcmVhdG9ycy5hc3luY0lzaUJPRk9TUnVubmluZyhmYWxzZSwgXCJOb3QgUnVubmluZ1wiKSk7XG4gICAgfVxuICAgIGNhdGNoIChlKSB7XG4gICAgICAgIGlmKGUubWVzc2FnZS5pbmRleE9mKFwiNDAxXCIpID49IDApIHtcbiAgICAgICAgICAgIGFjdGlvbi5wYXlsb2FkLnB1c2goXCIvXCIpO1xuICAgICAgICB9XG4gICAgICAgIHlpZWxkIHB1dChhY3Rpb25DcmVhdG9ycy5hc3luY0lzaUJPRk9TUnVubmluZyhmYWxzZSwgXCJOb3QgUnVubmluZ1wiKSk7XG4gICAgfVxuXG59XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uKiBoZWFkZXJXYXRjaGVyKCkge1xuICAgIHlpZWxkIHRha2VFdmVyeShhY3Rpb25UeXBlcy5TQUdBX0dFVF9JU19JQk9GX09TX1JVTk5JTkcsIENhbGxJc2lCT0ZPU1J1bm5pbmcpO1xufVxuIl19