af51f63dfb7092e4642d39f184b06cd6
"use strict";

jest.mock('axios');

var _interopRequireDefault = require("/home/ibof07/pk/ibofmgmt/Code/UI/node_modules/@babel/runtime/helpers/interopRequireDefault");

var _reduxSaga = require("redux-saga");

var _axios = _interopRequireDefault(require("axios"));

var _enzyme = require("enzyme");

var _enzymeAdapterReact = _interopRequireDefault(require("enzyme-adapter-react-16"));

var _dashboardSaga = require("./dashboardSaga");

(0, _enzyme.configure)({
  adapter: new _enzymeAdapterReact.default()
});
describe('<Testing Redux Sagas />', () => {
  beforeEach(() => {
    jest.restoreAllMocks();
  });
  it('should render fetch volume sagas', async () => {
    const dispatchedActions = [];

    _axios.default.get.mockImplementationOnce(() => Promise.resolve({
      data: ['vol1', 'vol2']
    }));

    const passActions = [{
      type: 'FETCH_VOLUME_INFO',
      volumes: ['vol1', 'vol2']
    }, {
      type: 'ENABLE_FETCHING_ALERTS',
      fetchingAlerts: false
    }];
    const fakeStore = {
      dispatch: action => dispatchedActions.push(action)
    };
    await (0, _reduxSaga.runSaga)(fakeStore, _dashboardSaga.fetchVolumeInfo).done;
    expect(_axios.default.get).toHaveBeenCalledTimes(1);
    expect(_axios.default.get.mockResolvedValue(['vol1', 'vol2']));
    expect(dispatchedActions).toEqual(passActions);
    console.log(dispatchedActions);
  });
  it('if axios api return error in fetch volume sagas', async () => {
    const dispatchedActions = [];

    _axios.default.get.mockImplementationOnce(() => Promise.reject({
      error: 'error'
    }));

    const passActions = [{
      type: 'FETCH_VOLUME_INFO',
      volumes: []
    }, {
      type: 'ENABLE_FETCHING_ALERTS',
      fetchingAlerts: false
    }];
    const fakeStore = {
      dispatch: action => dispatchedActions.push(action)
    };
    await (0, _reduxSaga.runSaga)(fakeStore, _dashboardSaga.fetchVolumeInfo).done;
    expect(_axios.default.get).toHaveBeenCalledTimes(2);
    expect(_axios.default.get.mockResolvedValue('error'));
    expect(dispatchedActions).toEqual(passActions);
    console.log(dispatchedActions);
  });
  it('should render fetch alerts info', async () => {
    const dispatchedActions = [];

    _axios.default.get.mockImplementationOnce(() => Promise.resolve({
      data: {
        alerts: ['alerts1', 'alerts2']
      }
    }));

    const passActions = [{
      type: 'FETCH_ALERTS_INFO',
      alerts: ['alerts1', 'alerts2']
    }];
    const fakeStore = {
      dispatch: action => dispatchedActions.push(action)
    };
    await (0, _reduxSaga.runSaga)(fakeStore, _dashboardSaga.fetchAlertsInfo).done;
    console.log(dispatchedActions);
    expect(_axios.default.get).toHaveBeenCalledTimes(3);
    expect(_axios.default.get.mockResolvedValue(['alerts1', 'alerts2']));
    expect(dispatchedActions).toEqual(passActions);
    console.log(dispatchedActions);
  });
  it('if axios api return error in fetch alerts sagas', async () => {
    const dispatchedActions = [];

    _axios.default.get.mockImplementationOnce(() => Promise.reject({
      error: 'error'
    }));

    const passActions = []; // no actions dispatched in case of error

    const fakeStore = {
      dispatch: action => dispatchedActions.push(action)
    };
    await (0, _reduxSaga.runSaga)(fakeStore, _dashboardSaga.fetchAlertsInfo).done;
    console.log(dispatchedActions);
    expect(_axios.default.get).toHaveBeenCalledTimes(4);
    expect(_axios.default.get.mockResolvedValue('error'));
    expect(dispatchedActions).toEqual(passActions);
    console.log(dispatchedActions);
  });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImRhc2hib2FyZFNhZ2EudGVzdC5qcyJdLCJuYW1lcyI6WyJqZXN0IiwibW9jayIsImFkYXB0ZXIiLCJBZGFwdGVyIiwiZGVzY3JpYmUiLCJiZWZvcmVFYWNoIiwicmVzdG9yZUFsbE1vY2tzIiwiaXQiLCJkaXNwYXRjaGVkQWN0aW9ucyIsImF4aW9zIiwiZ2V0IiwibW9ja0ltcGxlbWVudGF0aW9uT25jZSIsIlByb21pc2UiLCJyZXNvbHZlIiwiZGF0YSIsInBhc3NBY3Rpb25zIiwidHlwZSIsInZvbHVtZXMiLCJmZXRjaGluZ0FsZXJ0cyIsImZha2VTdG9yZSIsImRpc3BhdGNoIiwiYWN0aW9uIiwicHVzaCIsImZldGNoVm9sdW1lSW5mbyIsImRvbmUiLCJleHBlY3QiLCJ0b0hhdmVCZWVuQ2FsbGVkVGltZXMiLCJtb2NrUmVzb2x2ZWRWYWx1ZSIsInRvRXF1YWwiLCJjb25zb2xlIiwibG9nIiwicmVqZWN0IiwiZXJyb3IiLCJhbGVydHMiLCJmZXRjaEFsZXJ0c0luZm8iXSwibWFwcGluZ3MiOiI7O0FBTUFBLElBQUksQ0FBQ0MsSUFBTCxDQUFVLE9BQVY7Ozs7QUFOQTs7QUFDQTs7QUFDQTs7QUFDQTs7QUFDQTs7QUFHQSx1QkFBVTtBQUFFQyxFQUFBQSxPQUFPLEVBQUUsSUFBSUMsMkJBQUo7QUFBWCxDQUFWO0FBRUFDLFFBQVEsQ0FBQyx5QkFBRCxFQUE0QixNQUFNO0FBQ3RDQyxFQUFBQSxVQUFVLENBQUMsTUFBTTtBQUNiTCxJQUFBQSxJQUFJLENBQUNNLGVBQUw7QUFDSCxHQUZTLENBQVY7QUFJQUMsRUFBQUEsRUFBRSxDQUFDLGtDQUFELEVBQXFDLFlBQVk7QUFDL0MsVUFBTUMsaUJBQWlCLEdBQUcsRUFBMUI7O0FBQ0FDLG1CQUFNQyxHQUFOLENBQVVDLHNCQUFWLENBQWlDLE1BQzdCQyxPQUFPLENBQUNDLE9BQVIsQ0FBZ0I7QUFDWkMsTUFBQUEsSUFBSSxFQUFFLENBQUMsTUFBRCxFQUFTLE1BQVQ7QUFETSxLQUFoQixDQURKOztBQUtBLFVBQU1DLFdBQVcsR0FBRyxDQUFDO0FBQUVDLE1BQUFBLElBQUksRUFBRSxtQkFBUjtBQUE2QkMsTUFBQUEsT0FBTyxFQUFFLENBQUMsTUFBRCxFQUFTLE1BQVQ7QUFBdEMsS0FBRCxFQUEyRDtBQUFFRCxNQUFBQSxJQUFJLEVBQUUsd0JBQVI7QUFBa0NFLE1BQUFBLGNBQWMsRUFBRTtBQUFsRCxLQUEzRCxDQUFwQjtBQUNBLFVBQU1DLFNBQVMsR0FBRztBQUNkQyxNQUFBQSxRQUFRLEVBQUVDLE1BQU0sSUFBSWIsaUJBQWlCLENBQUNjLElBQWxCLENBQXVCRCxNQUF2QjtBQUROLEtBQWxCO0FBR0EsVUFBTSx3QkFBUUYsU0FBUixFQUFtQkksOEJBQW5CLEVBQW9DQyxJQUExQztBQUNBQyxJQUFBQSxNQUFNLENBQUNoQixlQUFNQyxHQUFQLENBQU4sQ0FBa0JnQixxQkFBbEIsQ0FBd0MsQ0FBeEM7QUFDQUQsSUFBQUEsTUFBTSxDQUFDaEIsZUFBTUMsR0FBTixDQUFVaUIsaUJBQVYsQ0FBNEIsQ0FBQyxNQUFELEVBQVMsTUFBVCxDQUE1QixDQUFELENBQU47QUFDQUYsSUFBQUEsTUFBTSxDQUFDakIsaUJBQUQsQ0FBTixDQUEwQm9CLE9BQTFCLENBQWtDYixXQUFsQztBQUNBYyxJQUFBQSxPQUFPLENBQUNDLEdBQVIsQ0FBWXRCLGlCQUFaO0FBQ0gsR0FoQkMsQ0FBRjtBQWtCQUQsRUFBQUEsRUFBRSxDQUFDLGlEQUFELEVBQW9ELFlBQVk7QUFDOUQsVUFBTUMsaUJBQWlCLEdBQUcsRUFBMUI7O0FBQ0FDLG1CQUFNQyxHQUFOLENBQVVDLHNCQUFWLENBQWlDLE1BQzdCQyxPQUFPLENBQUNtQixNQUFSLENBQWU7QUFDWEMsTUFBQUEsS0FBSyxFQUFFO0FBREksS0FBZixDQURKOztBQUtBLFVBQU1qQixXQUFXLEdBQUcsQ0FBQztBQUFFQyxNQUFBQSxJQUFJLEVBQUUsbUJBQVI7QUFBNkJDLE1BQUFBLE9BQU8sRUFBRTtBQUF0QyxLQUFELEVBQTZDO0FBQUVELE1BQUFBLElBQUksRUFBRSx3QkFBUjtBQUFrQ0UsTUFBQUEsY0FBYyxFQUFFO0FBQWxELEtBQTdDLENBQXBCO0FBQ0EsVUFBTUMsU0FBUyxHQUFHO0FBQ2RDLE1BQUFBLFFBQVEsRUFBRUMsTUFBTSxJQUFJYixpQkFBaUIsQ0FBQ2MsSUFBbEIsQ0FBdUJELE1BQXZCO0FBRE4sS0FBbEI7QUFHQSxVQUFNLHdCQUFRRixTQUFSLEVBQW1CSSw4QkFBbkIsRUFBb0NDLElBQTFDO0FBQ0FDLElBQUFBLE1BQU0sQ0FBQ2hCLGVBQU1DLEdBQVAsQ0FBTixDQUFrQmdCLHFCQUFsQixDQUF3QyxDQUF4QztBQUNBRCxJQUFBQSxNQUFNLENBQUNoQixlQUFNQyxHQUFOLENBQVVpQixpQkFBVixDQUE0QixPQUE1QixDQUFELENBQU47QUFDQUYsSUFBQUEsTUFBTSxDQUFDakIsaUJBQUQsQ0FBTixDQUEwQm9CLE9BQTFCLENBQWtDYixXQUFsQztBQUNBYyxJQUFBQSxPQUFPLENBQUNDLEdBQVIsQ0FBWXRCLGlCQUFaO0FBQ0gsR0FoQkMsQ0FBRjtBQWtCQUQsRUFBQUEsRUFBRSxDQUFDLGlDQUFELEVBQW9DLFlBQVk7QUFDOUMsVUFBTUMsaUJBQWlCLEdBQUcsRUFBMUI7O0FBQ0FDLG1CQUFNQyxHQUFOLENBQVVDLHNCQUFWLENBQWlDLE1BQzdCQyxPQUFPLENBQUNDLE9BQVIsQ0FBZ0I7QUFDWkMsTUFBQUEsSUFBSSxFQUFDO0FBQUNtQixRQUFBQSxNQUFNLEVBQUMsQ0FBQyxTQUFELEVBQVksU0FBWjtBQUFSO0FBRE8sS0FBaEIsQ0FESjs7QUFLQSxVQUFNbEIsV0FBVyxHQUFHLENBQUM7QUFBRUMsTUFBQUEsSUFBSSxFQUFFLG1CQUFSO0FBQTZCaUIsTUFBQUEsTUFBTSxFQUFFLENBQUMsU0FBRCxFQUFZLFNBQVo7QUFBckMsS0FBRCxDQUFwQjtBQUNBLFVBQU1kLFNBQVMsR0FBRztBQUNkQyxNQUFBQSxRQUFRLEVBQUVDLE1BQU0sSUFBSWIsaUJBQWlCLENBQUNjLElBQWxCLENBQXVCRCxNQUF2QjtBQUROLEtBQWxCO0FBR0EsVUFBTSx3QkFBUUYsU0FBUixFQUFtQmUsOEJBQW5CLEVBQW9DVixJQUExQztBQUNBSyxJQUFBQSxPQUFPLENBQUNDLEdBQVIsQ0FBWXRCLGlCQUFaO0FBQ0FpQixJQUFBQSxNQUFNLENBQUNoQixlQUFNQyxHQUFQLENBQU4sQ0FBa0JnQixxQkFBbEIsQ0FBd0MsQ0FBeEM7QUFDQUQsSUFBQUEsTUFBTSxDQUFDaEIsZUFBTUMsR0FBTixDQUFVaUIsaUJBQVYsQ0FBNEIsQ0FBQyxTQUFELEVBQVksU0FBWixDQUE1QixDQUFELENBQU47QUFDQUYsSUFBQUEsTUFBTSxDQUFDakIsaUJBQUQsQ0FBTixDQUEwQm9CLE9BQTFCLENBQWtDYixXQUFsQztBQUNBYyxJQUFBQSxPQUFPLENBQUNDLEdBQVIsQ0FBWXRCLGlCQUFaO0FBQ0gsR0FqQkMsQ0FBRjtBQW1CQUQsRUFBQUEsRUFBRSxDQUFDLGlEQUFELEVBQW9ELFlBQVk7QUFDOUQsVUFBTUMsaUJBQWlCLEdBQUcsRUFBMUI7O0FBQ0FDLG1CQUFNQyxHQUFOLENBQVVDLHNCQUFWLENBQWlDLE1BQzdCQyxPQUFPLENBQUNtQixNQUFSLENBQWU7QUFDWEMsTUFBQUEsS0FBSyxFQUFFO0FBREksS0FBZixDQURKOztBQUtBLFVBQU1qQixXQUFXLEdBQUcsRUFBcEIsQ0FQOEQsQ0FPdkM7O0FBQ3ZCLFVBQU1JLFNBQVMsR0FBRztBQUNkQyxNQUFBQSxRQUFRLEVBQUVDLE1BQU0sSUFBSWIsaUJBQWlCLENBQUNjLElBQWxCLENBQXVCRCxNQUF2QjtBQUROLEtBQWxCO0FBR0EsVUFBTSx3QkFBUUYsU0FBUixFQUFtQmUsOEJBQW5CLEVBQW9DVixJQUExQztBQUNBSyxJQUFBQSxPQUFPLENBQUNDLEdBQVIsQ0FBWXRCLGlCQUFaO0FBQ0FpQixJQUFBQSxNQUFNLENBQUNoQixlQUFNQyxHQUFQLENBQU4sQ0FBa0JnQixxQkFBbEIsQ0FBd0MsQ0FBeEM7QUFDQUQsSUFBQUEsTUFBTSxDQUFDaEIsZUFBTUMsR0FBTixDQUFVaUIsaUJBQVYsQ0FBNEIsT0FBNUIsQ0FBRCxDQUFOO0FBQ0FGLElBQUFBLE1BQU0sQ0FBQ2pCLGlCQUFELENBQU4sQ0FBMEJvQixPQUExQixDQUFrQ2IsV0FBbEM7QUFDQWMsSUFBQUEsT0FBTyxDQUFDQyxHQUFSLENBQVl0QixpQkFBWjtBQUNILEdBakJDLENBQUY7QUFrQkgsQ0E5RU8sQ0FBUiIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHJ1blNhZ2EgfSBmcm9tICdyZWR1eC1zYWdhJ1xuaW1wb3J0IGF4aW9zIGZyb20gJ2F4aW9zJ1xuaW1wb3J0IHsgY29uZmlndXJlLH0gZnJvbSAnZW56eW1lJztcbmltcG9ydCBBZGFwdGVyIGZyb20gJ2VuenltZS1hZGFwdGVyLXJlYWN0LTE2JztcbmltcG9ydCB7ZmV0Y2hWb2x1bWVJbmZvLGZldGNoQWxlcnRzSW5mbyB9IGZyb20gXCIuL2Rhc2hib2FyZFNhZ2FcIlxuXG5qZXN0Lm1vY2soJ2F4aW9zJyk7XG5jb25maWd1cmUoeyBhZGFwdGVyOiBuZXcgQWRhcHRlcigpIH0pO1xuXG5kZXNjcmliZSgnPFRlc3RpbmcgUmVkdXggU2FnYXMgLz4nLCAoKSA9PiB7XG4gICAgYmVmb3JlRWFjaCgoKSA9PiB7XG4gICAgICAgIGplc3QucmVzdG9yZUFsbE1vY2tzKCk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHJlbmRlciBmZXRjaCB2b2x1bWUgc2FnYXMnLCBhc3luYyAoKSA9PiB7XG4gICAgICAgIGNvbnN0IGRpc3BhdGNoZWRBY3Rpb25zID0gW107XG4gICAgICAgIGF4aW9zLmdldC5tb2NrSW1wbGVtZW50YXRpb25PbmNlKCgpID0+XG4gICAgICAgICAgICBQcm9taXNlLnJlc29sdmUoe1xuICAgICAgICAgICAgICAgIGRhdGE6IFsndm9sMScsICd2b2wyJ11cbiAgICAgICAgICAgIH0pXG4gICAgICAgICk7XG4gICAgICAgIGNvbnN0IHBhc3NBY3Rpb25zID0gW3sgdHlwZTogJ0ZFVENIX1ZPTFVNRV9JTkZPJywgdm9sdW1lczogWyd2b2wxJywgJ3ZvbDInXSB9LCB7IHR5cGU6ICdFTkFCTEVfRkVUQ0hJTkdfQUxFUlRTJywgZmV0Y2hpbmdBbGVydHM6IGZhbHNlIH1dO1xuICAgICAgICBjb25zdCBmYWtlU3RvcmUgPSB7XG4gICAgICAgICAgICBkaXNwYXRjaDogYWN0aW9uID0+IGRpc3BhdGNoZWRBY3Rpb25zLnB1c2goYWN0aW9uKVxuICAgICAgICB9XG4gICAgICAgIGF3YWl0IHJ1blNhZ2EoZmFrZVN0b3JlLCBmZXRjaFZvbHVtZUluZm8pLmRvbmU7XG4gICAgICAgIGV4cGVjdChheGlvcy5nZXQpLnRvSGF2ZUJlZW5DYWxsZWRUaW1lcygxKTtcbiAgICAgICAgZXhwZWN0KGF4aW9zLmdldC5tb2NrUmVzb2x2ZWRWYWx1ZShbJ3ZvbDEnLCAndm9sMiddKSk7XG4gICAgICAgIGV4cGVjdChkaXNwYXRjaGVkQWN0aW9ucykudG9FcXVhbChwYXNzQWN0aW9ucyk7XG4gICAgICAgIGNvbnNvbGUubG9nKGRpc3BhdGNoZWRBY3Rpb25zKTtcbiAgICB9KTtcblxuICAgIGl0KCdpZiBheGlvcyBhcGkgcmV0dXJuIGVycm9yIGluIGZldGNoIHZvbHVtZSBzYWdhcycsIGFzeW5jICgpID0+IHtcbiAgICAgICAgY29uc3QgZGlzcGF0Y2hlZEFjdGlvbnMgPSBbXTtcbiAgICAgICAgYXhpb3MuZ2V0Lm1vY2tJbXBsZW1lbnRhdGlvbk9uY2UoKCkgPT5cbiAgICAgICAgICAgIFByb21pc2UucmVqZWN0KHtcbiAgICAgICAgICAgICAgICBlcnJvcjogJ2Vycm9yJ1xuICAgICAgICAgICAgfSlcbiAgICAgICAgKTtcbiAgICAgICAgY29uc3QgcGFzc0FjdGlvbnMgPSBbeyB0eXBlOiAnRkVUQ0hfVk9MVU1FX0lORk8nLCB2b2x1bWVzOiBbXSB9LCB7IHR5cGU6ICdFTkFCTEVfRkVUQ0hJTkdfQUxFUlRTJywgZmV0Y2hpbmdBbGVydHM6IGZhbHNlIH1dO1xuICAgICAgICBjb25zdCBmYWtlU3RvcmUgPSB7XG4gICAgICAgICAgICBkaXNwYXRjaDogYWN0aW9uID0+IGRpc3BhdGNoZWRBY3Rpb25zLnB1c2goYWN0aW9uKVxuICAgICAgICB9XG4gICAgICAgIGF3YWl0IHJ1blNhZ2EoZmFrZVN0b3JlLCBmZXRjaFZvbHVtZUluZm8pLmRvbmU7XG4gICAgICAgIGV4cGVjdChheGlvcy5nZXQpLnRvSGF2ZUJlZW5DYWxsZWRUaW1lcygyKTtcbiAgICAgICAgZXhwZWN0KGF4aW9zLmdldC5tb2NrUmVzb2x2ZWRWYWx1ZSgnZXJyb3InKSk7XG4gICAgICAgIGV4cGVjdChkaXNwYXRjaGVkQWN0aW9ucykudG9FcXVhbChwYXNzQWN0aW9ucyk7XG4gICAgICAgIGNvbnNvbGUubG9nKGRpc3BhdGNoZWRBY3Rpb25zKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgcmVuZGVyIGZldGNoIGFsZXJ0cyBpbmZvJywgYXN5bmMgKCkgPT4ge1xuICAgICAgICBjb25zdCBkaXNwYXRjaGVkQWN0aW9ucyA9IFtdO1xuICAgICAgICBheGlvcy5nZXQubW9ja0ltcGxlbWVudGF0aW9uT25jZSgoKSA9PlxuICAgICAgICAgICAgUHJvbWlzZS5yZXNvbHZlKHtcbiAgICAgICAgICAgICAgICBkYXRhOnthbGVydHM6WydhbGVydHMxJywgJ2FsZXJ0czInXX0gXG4gICAgICAgICAgICB9KVxuICAgICAgICApO1xuICAgICAgICBjb25zdCBwYXNzQWN0aW9ucyA9IFt7IHR5cGU6ICdGRVRDSF9BTEVSVFNfSU5GTycsIGFsZXJ0czogWydhbGVydHMxJywgJ2FsZXJ0czInXSB9XTtcbiAgICAgICAgY29uc3QgZmFrZVN0b3JlID0ge1xuICAgICAgICAgICAgZGlzcGF0Y2g6IGFjdGlvbiA9PiBkaXNwYXRjaGVkQWN0aW9ucy5wdXNoKGFjdGlvbilcbiAgICAgICAgfVxuICAgICAgICBhd2FpdCBydW5TYWdhKGZha2VTdG9yZSwgZmV0Y2hBbGVydHNJbmZvKS5kb25lO1xuICAgICAgICBjb25zb2xlLmxvZyhkaXNwYXRjaGVkQWN0aW9ucylcbiAgICAgICAgZXhwZWN0KGF4aW9zLmdldCkudG9IYXZlQmVlbkNhbGxlZFRpbWVzKDMpO1xuICAgICAgICBleHBlY3QoYXhpb3MuZ2V0Lm1vY2tSZXNvbHZlZFZhbHVlKFsnYWxlcnRzMScsICdhbGVydHMyJ10pKTtcbiAgICAgICAgZXhwZWN0KGRpc3BhdGNoZWRBY3Rpb25zKS50b0VxdWFsKHBhc3NBY3Rpb25zKTtcbiAgICAgICAgY29uc29sZS5sb2coZGlzcGF0Y2hlZEFjdGlvbnMpO1xuICAgIH0pO1xuXG4gICAgaXQoJ2lmIGF4aW9zIGFwaSByZXR1cm4gZXJyb3IgaW4gZmV0Y2ggYWxlcnRzIHNhZ2FzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgICBjb25zdCBkaXNwYXRjaGVkQWN0aW9ucyA9IFtdO1xuICAgICAgICBheGlvcy5nZXQubW9ja0ltcGxlbWVudGF0aW9uT25jZSgoKSA9PlxuICAgICAgICAgICAgUHJvbWlzZS5yZWplY3Qoe1xuICAgICAgICAgICAgICAgIGVycm9yOiAnZXJyb3InXG4gICAgICAgICAgICB9KVxuICAgICAgICApO1xuICAgICAgICBjb25zdCBwYXNzQWN0aW9ucyA9IFtdOy8vIG5vIGFjdGlvbnMgZGlzcGF0Y2hlZCBpbiBjYXNlIG9mIGVycm9yXG4gICAgICAgIGNvbnN0IGZha2VTdG9yZSA9IHtcbiAgICAgICAgICAgIGRpc3BhdGNoOiBhY3Rpb24gPT4gZGlzcGF0Y2hlZEFjdGlvbnMucHVzaChhY3Rpb24pXG4gICAgICAgIH1cbiAgICAgICAgYXdhaXQgcnVuU2FnYShmYWtlU3RvcmUsIGZldGNoQWxlcnRzSW5mbykuZG9uZTtcbiAgICAgICAgY29uc29sZS5sb2coZGlzcGF0Y2hlZEFjdGlvbnMpO1xuICAgICAgICBleHBlY3QoYXhpb3MuZ2V0KS50b0hhdmVCZWVuQ2FsbGVkVGltZXMoNCk7XG4gICAgICAgIGV4cGVjdChheGlvcy5nZXQubW9ja1Jlc29sdmVkVmFsdWUoJ2Vycm9yJykpO1xuICAgICAgICBleHBlY3QoZGlzcGF0Y2hlZEFjdGlvbnMpLnRvRXF1YWwocGFzc0FjdGlvbnMpO1xuICAgICAgICBjb25zb2xlLmxvZyhkaXNwYXRjaGVkQWN0aW9ucyk7XG4gICAgfSk7XG59KTtcblxuIl19